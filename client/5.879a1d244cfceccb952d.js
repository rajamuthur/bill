(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"9HtL":function(l,n,e){"use strict";e.d(n,"a",function(){return o}),e("b4/y"),e("POfX"),e("gbi4"),e("MO+k");var t=e("qb46"),a=e("wd/R"),r=(e("xIcu"),function(l,n,e,t){return new(e||(e=Promise))(function(a,r){function o(l){try{u(t.next(l))}catch(n){r(n)}}function i(l){try{u(t.throw(l))}catch(n){r(n)}}function u(l){l.done?a(l.value):new e(function(n){n(l.value)}).then(o,i)}u((t=t.apply(l,n||[])).next())})}),o=function(){function l(l,n,e,a){var r=this;this._billService=l,this._categoryService=n,this._commonService=e,this._itemService=a,this.categoryList=[],this.mappedCategoryList={},this.selectedPieCategory=[],this.selectedLineCategory=[],this.searchPieBillType="expense",this.searchLineBillType="expense",this.itemList=[],this.selectedPieItem=[],this.selectedLineItem=[],this.lineChartTotal=0,this.pieChartTotal=0,this.isLineChartReady=!1,this.showLoading4PieChart=!1,this.showLoading4LineChart=!1,this.isPieChartReady=!1,this.monthYearSpiliter=" ",this.maxDatePeriodCount=70,this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.billTypes=[{groupText:"Expense",groupName:"expense"},{groupText:"Income",groupName:"income"}],this.lineChartData=[],this.lineChartLabels=[],this.lineChartOptions={responsive:!0},this.colors=[{backgroundColor:"rgba(0,247,255, 0.2)",borderColor:"rgba(0,247,255, 1)",pointBackgroundColor:"rgba(0,247,255, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(0,247,255, 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(196,255,77,0.2)",borderColor:"rgba(196,255,77, 1)",pointBackgroundColor:"rgba(77,83,96,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(196,255,77, 1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(255,77,77,0.2)",borderColor:"rgba(255,77,77,1)",pointBackgroundColor:"rgba(255,77,77,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(255,77,77,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(255,255,0, 0.2)",borderColor:"rgba(255,255,0,1)",pointBackgroundColor:"rgba(255,255,0 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(255,255,0,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(85,255,0, 0.2)",borderColor:"rgba(85,255,0, 1)",pointBackgroundColor:"rgba(85,255,0, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(85,255,0, 1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(255,230,255,0.2)",borderColor:"rgba(255,25,255,1)",pointBackgroundColor:"rgba(255,25,255,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(255,25,255,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(102,204,255, 0.2)",borderColor:"rgba(102,204,255, 1)",pointBackgroundColor:"rgba(102,204,255, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(102,204,255, 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(222, 218, 218, 0.2)",borderColor:"rgba(222, 218, 218, 1)",pointBackgroundColor:"rgba(26,0,26,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(222, 218, 218, 1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(26,0,153,0.2)",borderColor:"rgba(26,0,153,1)",pointBackgroundColor:"rgba(26,0,153,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(26,0,153,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(179,0,59,0.2)",borderColor:"rgba(179,0,59 1)",pointBackgroundColor:"rgba(179,0,59, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(179,0,59 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(0, 77, 51, 0.2)",borderColor:"rgba(0,77,51, 1)",pointBackgroundColor:"rgba(0,77,51, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(0,77,51, 1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(25,58,25,0.2)",borderColor:"rgba(25,58,25,1)",pointBackgroundColor:"rgba(25,58,25,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(25,58,25,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(102,204,0,0.2)",borderColor:"rgba(102,204,0, 1)",pointBackgroundColor:"rgba(102,204,0, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(102,204,0, 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(153,0,0, 0.2)",borderColor:"rgba(153,0,0,1)",pointBackgroundColor:"rgba(153,0,0, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(153,0,0,1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(244, 173, 66, 0.2)",borderColor:"rgba(244, 173, 66, 1)",pointBackgroundColor:"rgba(244, 173, 66, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(244, 173, 66, 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"}],this.lineChartColors=this.colors.slice(),this.pieChartColors=[{backgroundColor:["rgba(255,0,0,0.3)","rgba(0,255,0,0.3)","rgba(0,0,255,0.3)","rgb(51, 153, 102)","rgb(236, 179, 255)","rgb(204, 204, 255)","rgb(255, 255, 179)","rgb(194, 194, 163)","rgb(102, 255, 255)","rgb(0, 115, 230)","rgb(255, 153, 153)","rgb(255, 102, 179)","rgb(255, 85, 0)","rgb(159, 223, 191)","rgb(255, 140, 102)"]}],this.pieChartOptions={responsive:!0,legend:{position:"top"},plugins:{datalabels:{formatter:function(l,n){return n.chart.data.labels[n.dataIndex]}}}},this.pieChartLabels=[],this.pieChartData=[],this.pieChartLegend=!0,this.pieChartPlugins=[t],this.dropdownSettings={singleSelection:!1,idField:"_id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:2,allowpieSearchFilter:!0,searchAutofocus:!0},this.lineSearchFilter={},this.pieSearchFilter={},this.getDefaultDataset().then(function(l){r.init()})}return l.prototype.ngOnInit=function(){this.pieChartType="pie",this.lineChartLegend=!0,this.lineChartType="line"},l.prototype.setDeafaultCategoryList=function(l){this.categoryList=l,this.selectedLineCategory=this.selectedPieCategory=l.slice(0,4),this.mappedCategoryList=this._commonService.createHasMap(this.categoryList,"_id")},l.prototype.groupByFields=function(l,n,e){var t={};if(l.length>0){var a=this;l.forEach(function(l){if(l[n]&&l[e]){var r=a.mappedCategoryList[l[n]].name;t[r]?t[r]+=l[e]:t[r]=l[e]}})}return t},l.prototype.setDefaultSearchFilter=function(l,n,e){var t;return(t=this._commonService.filterByFieldName("pie"==n?"category"==e?this.selectedPieCategory:this.selectedPieItem:"category"==e?this.selectedLineCategory:this.selectedLineItem,"_id")).length>0&&(l[e]=t),console.log("filter: ",t),t},l.prototype.init=function(){this.loadPieData(),this.loadLineChart()},l.prototype.loadPieData=function(){this.setDefaultSearchFilter(this.pieSearchFilter,"pie","category"),this.pieSearchFilter.type=this.searchPieBillType,this.setDefaultSearchFilter(this.pieSearchFilter,"pie","item"),this.getPieDataSet()},l.prototype.getPieDataSet=function(){var l=this;this.showLoading4PieChart=!0,this.getBillDetails(this.pieSearchFilter).then(function(n){l.pieChartData=n;var e=l.groupByFields(l.pieChartData,"_category","amount");l.updatePieDataSet(e),l.showLoading4PieChart=!1})},l.prototype.loadLineChart=function(){this.setDefaultSearchFilter(this.lineSearchFilter,"line","category"),this.lineSearchFilter.type=this.searchLineBillType,this.setDefaultSearchFilter(this.lineSearchFilter,"line","item"),this.getLineDataSet()},l.prototype.getLineDataSet=function(){var l=this;this.showLoading4LineChart=!0,console.log("line Filter: ",this.lineSearchFilter),this.getBillDetails(this.lineSearchFilter).then(function(n){console.log("bill data: ",n),l.initializeLineChart(n),l.showLoading4LineChart=!1})},l.prototype.initializeLineChart=function(l){var n=this.getLineChartDatePeriodType(),e=this.getLinChartXaxisPeriods(n),t=this.getLineChartYaxisData(l,e,n);console.log("typeDetails: ",n,"xAxis: ",e,"yAxis: ",t),this.updateLineChartDataSet(e,t)},l.prototype.chartClicked=function(l){},l.prototype.chartHovered=function(l){},l.prototype.updateLineChartDataSet=function(l,n){console.log("updateLineChartDataSet labelData:",l,"labelValues:",n),this.lineChartLabels.length=0,this.lineChartData.length=0;var e=n.length>l.length?n.length:l.length;if(e>0){for(var t=0;t<e;t++)void 0!==l[t]&&""!=l[t]&&this.lineChartLabels.push(l[t]),void 0!==n[t]&&""!=n[t]&&(this.lineChartData.push(n[t]),void 0!==this.colors[t]&&""!=this.colors[t]&&this.lineChartColors.push(this.colors[t]));this.isLineChartReady=!0}console.log(this.lineChartLabels,this.lineChartData,this.lineChartColors)},l.prototype.getTotalAmountBetweenDates=function(l,n,e,t){var a=this;void 0===t&&(t=!0);var r=0,o="",i="";if(t){var u=this._commonService.getStartAndEndTimeStamp(e);o=u.dateFrom,i=u.dateTo}else{var s=new Date(e),c=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0);o=c.getTime();var d=new Date(s.getFullYear(),s.getMonth(),s.getDate(),23,59);i=d.getTime(),"2019-05-07"==e&&console.log("startDay:",c,"endDay:",d,"fromDateTimeStamp: ",o,"toDateTimeStamp:",i)}return l.length>0&&l.forEach(function(l){var e=a._commonService.formatDate(l.purchased_date),t=new Date(e).getTime();l._category==n&&o<t&&i>t&&(r+=l.amount)}),r},l.prototype.updateLineChart=function(){var l=["aaa","bbb"],n=[{data:[22,33],label:"Series 1"},{data:[2,93],label:"Series 2"}];this.lineChartLabels.length=0,this.lineChartData.length=0,this.lineChartColors.length=0;var e=this;l.length>0&&(l.forEach(function(l,t){e.lineChartLabels.push(l),console.log("push: ",n[t]),e.lineChartData.push(n[t]),e.lineChartColors.push(e.colors[t])}),this.isLineChartReady=!0)},l.prototype.getLineChartYaxisData=function(l,n,e){var t=[],a=this.selectedLineCategory.length>0?this.selectedLineCategory:this.categoryList;console.log("getLineChartYaxisData category: ",a),this.lineChartTotal=0;for(var r=0;r<a.length;r++){for(var o={data:[],label:a[r].name},i=0;i<n.length;i++){var u=this.getTotalAmountBetweenDates(l,a[r]._id,n[i],"daily"!=e.type);this.lineChartTotal+=u,o.data.push(u)}t.push(o)}return t},l.prototype.getLineChartDatePeriodType=function(){var l=12,n={type:""};if(console.log("getLineChartDatePeriodType: ",this.lineSearchFilter),void 0===this.lineSearchFilter.purchased_date||""==this.lineSearchFilter.purchased_date)n.type="daily";else{var e=this._commonService.daysBetween(this.lineSearchFilter.purchased_date.dateFrom,this.lineSearchFilter.purchased_date.dateTo);console.log("dateDiff: ",e),e>this.maxDatePeriodCount?(n.type="monthly",l=Math.round(e/20),n.duration=l):n.type="daily"}return console.log("getLineChartDatePeriodType resp: ",n),n},l.prototype.getLinChartXaxisPeriods=function(l){var n=[];if("monthly"==l.type)n=this._commonService.getMonthList(l.duration);else{var e=new Date(this.lineSearchFilter.purchased_date.dateFrom),t=new Date(this.lineSearchFilter.purchased_date.dateTo);n=this._commonService.getDates(e,t)}return n},l.prototype.getBillDetails=function(l){var n=this;return new Promise(function(e,t){n._billService.getBillsListWithSearch({filter:l,sumByBillDate:!0}).subscribe(function(l){e(l.result&&l.result.data?l.result.data:[])})})},l.prototype.updatePieDataSet=function(l){var n=Object.keys(l),e=this._commonService.getObjectValues(l);console.log("updatePieDataSet labelData: ",n,"labelValues:",e,"data:",l),this.pieChartLabels.length=0,this.pieChartData.length=0;var t=this;n.length>0&&(t.pieChartTotal=0,n.forEach(function(l,n){t.pieChartLabels.push(l),t.pieChartData.push(e[n]),t.pieChartTotal+=e[n]}),this.isPieChartReady=!0)},l.prototype.getDefaultDataset=function(){return r(this,void 0,void 0,function(){var l,n,e;return function(l,n){var e,t,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(r){return function(i){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,t&&(a=2&r[0]?t.return:r[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,r[1])).done)return a;switch(t=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,t=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=n.call(l,o)}catch(i){r=[6,i],t=0}finally{e=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,i])}}}(this,function(t){switch(t.label){case 0:return[4,this._categoryService.getCategoryList().toPromise()];case 1:return l=t.sent(),n=l.result&&l.result.data?l.result.data:[],[4,this._itemService.getItemListByName().toPromise()];case 2:return e=t.sent(),this.itemList="object"==typeof e&&e.length>0?e.slice():[],this.setDeafaultCategoryList(n),[2]}})})},l.prototype.onLineChartSearch=function(){this.selectedLineItem.length>0?this.lineSearchFilter.name=this._commonService.filterByFieldName(this.selectedLineItem,"_id"):delete this.lineSearchFilter.name,this.searchLineBillType?this.lineSearchFilter.type=this.searchLineBillType:delete this.lineSearchFilter.type,this.selectedLineCategory.length>0?this.lineSearchFilter.category=this._commonService.filterByFieldName(this.selectedLineCategory,"_id"):delete this.lineSearchFilter.category,this.getLineDataSet()},l.prototype.onPieChartSearch=function(){this.selectedPieItem.length>0?this.pieSearchFilter.name=this._commonService.filterByFieldName(this.selectedPieItem,"_id"):delete this.pieSearchFilter.name,this.searchPieBillType?this.pieSearchFilter.type=this.searchPieBillType:delete this.pieSearchFilter.type,this.selectedPieCategory.length>0?this.pieSearchFilter.category=this._commonService.filterByFieldName(this.selectedPieCategory,"_id"):delete this.pieSearchFilter.category,console.log("before ",this.pieSearchFilter),this.getPieDataSet()},l.prototype.triggerDatePicker1=function(){var l=this,n=a().subtract(6,"days").format("YYYY-MM-DD HH:mm"),e=a(n).utc().valueOf(),t=a().format("YYYY-MM-DD HH:mm"),r=a(t).utc().valueOf();this.pieSearchFilter.purchased_date={dateFrom:e,dateTo:r},this.lineSearchFilter.purchased_date={dateFrom:e,dateTo:r},console.log("defaultToDate: ",t,"defaultStartDate:",n),this._commonService.initializeDateRangePicker("pDate",{restrictFutureDate:!0,defaultDates:{startDate:new Date(n),endDate:new Date(t)}}).subscribe(function(n){console.log("pie chart dates: ",n),l.pieSearchFilter.purchased_date={dateFrom:n.startDate,dateTo:n.endDate}}),this._commonService.initializeDateRangePicker("lDate",{restrictFutureDate:!0}).subscribe(function(n){console.log("line chart dates: ",n),l.lineSearchFilter.purchased_date={dateFrom:n.startDate,dateTo:n.endDate}})},l.prototype.triggerDatePicker=function(){var l=this,n=a().subtract(6,"days").format("YYYY-MM-DD HH:mm"),e=a(n).utc().valueOf(),t=a().format("YYYY-MM-DD HH:mm"),r=a(t).utc().valueOf();this.pieSearchFilter.purchased_date={dateFrom:e,dateTo:r},this.lineSearchFilter.purchased_date={dateFrom:e,dateTo:r},console.log("triggerDatePicker defaultToDate: ",t,"defaultStartDate:",n),this._commonService.initializeDateRangePicker("pDate",{restrictFutureDate:!0,defaultDates:{startDate:new Date(n),endDate:new Date(t)}}).subscribe(function(n){console.log("pie chart dates: ",n),l.pieSearchFilter.purchased_date={dateFrom:n.startDate,dateTo:n.endDate}}),this._commonService.initializeDateRangePicker("lDate",{restrictFutureDate:!0,defaultDates:{startDate:new Date(n),endDate:new Date(t)}}).subscribe(function(n){console.log("line chart dates: ",n),l.lineSearchFilter.purchased_date={dateFrom:n.startDate,dateTo:n.endDate}}),this._commonService.setDateRangeValInDatePicker("pDate",n,t),this._commonService.setDateRangeValInDatePicker("lDate",n,t)},l.prototype.ngAfterViewInit=function(){this.triggerDatePicker()},l}()},Ll2n:function(l,n,e){"use strict";e.d(n,"a",function(){return t});var t=function(){return function(){}}()},"Ui/4":function(l,n,e){"use strict";var t=e("CcnG"),a=e("gIcY"),r=e("Zseb"),o=e("rMXk"),i=e("3zLz"),u=e("m/DL"),s=e("5NQ/"),c=e("Ip0R"),d=e("9HtL"),h=e("b4/y"),g=e("POfX"),b=e("gbi4"),p=e("xIcu");e.d(n,"a",function(){return L});var f=t.sb({encapsulation:0,styles:[[".reports-bill-type[_ngcontent-%COMP%]{width:70%;float:left}.reports-search-btn[_ngcontent-%COMP%]{margin-left:5%;width:25%;float:left}.loading-icon-large[_ngcontent-%COMP%]{font-size:50px}"]],data:{animation:[{type:7,name:"routerTransition",definitions:[],options:{}}]}});function v(l){return t.Ob(0,[(l()(),t.ub(0,0,null,null,3,"option",[],null,null,null,null,null)),t.tb(1,147456,null,0,a.t,[t.k,t.H,[2,a.x]],{value:[0,"value"]},null),t.tb(2,147456,null,0,a.E,[t.k,t.H,[8,null]],{value:[0,"value"]},null),(l()(),t.Mb(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.groupName),l(n,2,0,n.context.$implicit.groupName)},function(l,n){l(n,3,0,n.context.$implicit.groupText)})}function y(l){return t.Ob(0,[(l()(),t.ub(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"canvas",[["baseChart",""]],null,null,null,null,null)),t.tb(2,999424,[[1,4]],0,r.a,[t.k,r.c],{data:[0,"data"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],colors:[4,"colors"],legend:[5,"legend"],plugins:[6,"plugins"]},null)],function(l,n){var e=n.component;l(n,2,0,e.pieChartData,e.pieChartLabels,e.pieChartOptions,e.pieChartType,e.pieChartColors,e.pieChartLegend,e.pieChartPlugins)},null)}function C(l){return t.Ob(0,[(l()(),t.ub(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"div",[["class","p-2"]],null,null,null,null,null)),(l()(),t.ub(2,0,null,null,0,"i",[["class","fa fa-spinner fa-pulse loading-icon-large"]],null,null,null,null,null))],null,null)}function m(l){return t.Ob(0,[(l()(),t.ub(0,0,null,null,1,"div",[["class","p-3 pt-5"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["No Records Found"]))],null,null)}function x(l){return t.Ob(0,[(l()(),t.ub(0,0,null,null,3,"option",[],null,null,null,null,null)),t.tb(1,147456,null,0,a.t,[t.k,t.H,[2,a.x]],{value:[0,"value"]},null),t.tb(2,147456,null,0,a.E,[t.k,t.H,[8,null]],{value:[0,"value"]},null),(l()(),t.Mb(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.groupName),l(n,2,0,n.context.$implicit.groupName)},function(l,n){l(n,3,0,n.context.$implicit.groupText)})}function D(l){return t.Ob(0,[(l()(),t.ub(0,0,null,null,2,"div",[["class","line-chart-dataset"]],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"canvas",[["baseChart",""],["height","250"]],null,null,null,null,null)),t.tb(2,999424,[[1,4]],0,r.a,[t.k,r.c],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],colors:[4,"colors"],legend:[5,"legend"],plugins:[6,"plugins"]},null)],function(l,n){var e=n.component;l(n,2,0,e.lineChartData,e.lineChartLabels,e.lineChartOptions,e.lineChartType,e.lineChartColors,e.lineChartLegend,e.lineChartPlugins)},null)}function _(l){return t.Ob(0,[(l()(),t.ub(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.ub(1,0,null,null,1,"div",[["class","p-2"]],null,null,null,null,null)),(l()(),t.ub(2,0,null,null,0,"i",[["class","fa fa-spinner fa-pulse loading-icon-large"]],null,null,null,null,null))],null,null)}function S(l){return t.Ob(0,[(l()(),t.ub(0,0,null,null,1,"div",[["class","p-3 pt-5"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["No Records Found"]))],null,null)}function w(l){return t.Ob(0,[t.Kb(671088640,1,{chart:0}),(l()(),t.ub(1,0,null,null,131,"div",[],null,null,null,null,null)),(l()(),t.ub(2,0,null,null,1,"app-page-header",[],null,null,null,o.b,o.a)),t.tb(3,114688,null,0,i.a,[],{heading:[0,"heading"],icon:[1,"icon"]},null),(l()(),t.ub(4,0,null,null,128,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.ub(5,0,null,null,63,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),t.ub(6,0,null,null,62,"div",[["class","card mb-3"]],null,null,null,null,null)),(l()(),t.ub(7,0,null,null,5,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,[" Overall Report "])),(l()(),t.ub(9,0,null,null,3,"span",[["class","pull-right"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Total: "])),(l()(),t.ub(11,0,null,null,0,"i",[["class","fa fa-rupee"]],null,null,null,null,null)),(l()(),t.Mb(12,null,[" ",""])),(l()(),t.ub(13,0,null,null,55,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.ub(14,0,null,null,48,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.ub(15,0,null,null,10,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),t.ub(16,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Category"])),(l()(),t.ub(18,0,null,null,7,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.ub(19,0,null,null,6,"ng-multiselect-dropdown",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"]],function(l,n,e){var a=!0,r=l.component;return"blur"===n&&(a=!1!==t.Eb(l,20).onTouched()&&a),"ngModelChange"===n&&(a=!1!==(r.selectedPieCategory=e)&&a),a},u.b,u.a)),t.tb(20,49152,null,0,s.a,[t.h],{placeholder:[0,"placeholder"],settings:[1,"settings"],data:[2,"data"]},null),t.Jb(1024,null,a.n,function(l){return[l]},[s.a]),t.tb(22,671744,null,0,a.s,[[8,null],[8,null],[8,null],[6,a.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),t.Hb(23,{standalone:0}),t.Jb(2048,null,a.o,null,[a.s]),t.tb(25,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),t.ub(26,0,null,null,10,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),t.ub(27,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Bill Name"])),(l()(),t.ub(29,0,null,null,7,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.ub(30,0,null,null,6,"ng-multiselect-dropdown",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"]],function(l,n,e){var a=!0,r=l.component;return"blur"===n&&(a=!1!==t.Eb(l,31).onTouched()&&a),"ngModelChange"===n&&(a=!1!==(r.selectedPieItem=e)&&a),a},u.b,u.a)),t.tb(31,49152,null,0,s.a,[t.h],{placeholder:[0,"placeholder"],settings:[1,"settings"],data:[2,"data"]},null),t.Jb(1024,null,a.n,function(l){return[l]},[s.a]),t.tb(33,671744,null,0,a.s,[[8,null],[8,null],[8,null],[6,a.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),t.Hb(34,{standalone:0}),t.Jb(2048,null,a.o,null,[a.s]),t.tb(36,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),t.ub(37,0,null,null,7,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),t.ub(38,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Date"])),(l()(),t.ub(40,0,null,null,4,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.ub(41,0,null,null,3,"div",[["class","form-control"],["id","pDate"]],null,null,null,null,null)),(l()(),t.ub(42,0,null,null,0,"span",[["class","fa fa-calendar"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["\xa0\xa0"])),(l()(),t.ub(44,0,null,null,0,"span",[["class","date-val"]],null,null,null,null,null)),(l()(),t.ub(45,0,null,null,17,"div",[["class","col-xl-6 list-bill-search"]],null,null,null,null,null)),(l()(),t.ub(46,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Bill Type"])),(l()(),t.ub(48,0,null,null,14,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.ub(49,0,null,null,11,"select",[["class","form-control reports-bill-type"],["name","searchBillType"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(l,n,e){var a=!0,r=l.component;return"change"===n&&(a=!1!==t.Eb(l,50).onChange(e.target.value)&&a),"blur"===n&&(a=!1!==t.Eb(l,50).onTouched()&&a),"ngModelChange"===n&&(a=!1!==(r.searchPieBillType=e)&&a),a},null,null)),t.tb(50,16384,null,0,a.x,[t.H,t.k],null,null),t.Jb(1024,null,a.n,function(l){return[l]},[a.x]),t.tb(52,671744,null,0,a.s,[[8,null],[8,null],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Jb(2048,null,a.o,null,[a.s]),t.tb(54,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),t.ub(55,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),t.tb(56,147456,null,0,a.t,[t.k,t.H,[2,a.x]],{value:[0,"value"]},null),t.tb(57,147456,null,0,a.E,[t.k,t.H,[8,null]],{value:[0,"value"]},null),(l()(),t.Mb(-1,null,["All"])),(l()(),t.lb(16777216,null,null,1,null,v)),t.tb(60,278528,null,0,c.n,[t.S,t.P,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.ub(61,0,null,null,1,"button",[["class","btn btn-info reports-search-btn"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onPieChartSearch()&&t),t},null,null)),(l()(),t.Mb(-1,null,["Search"])),(l()(),t.lb(16777216,null,null,1,null,y)),t.tb(64,16384,null,0,c.o,[t.S,t.P],{ngIf:[0,"ngIf"]},null),(l()(),t.lb(16777216,null,null,1,null,C)),t.tb(66,16384,null,0,c.o,[t.S,t.P],{ngIf:[0,"ngIf"]},null),(l()(),t.lb(16777216,null,null,1,null,m)),t.tb(68,16384,null,0,c.o,[t.S,t.P],{ngIf:[0,"ngIf"]},null),(l()(),t.ub(69,0,null,null,63,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),t.ub(70,0,null,null,62,"div",[["class","card mb-3"]],null,null,null,null,null)),(l()(),t.ub(71,0,null,null,5,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,[" Detailed Report "])),(l()(),t.ub(73,0,null,null,3,"span",[["class","pull-right"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Total: "])),(l()(),t.ub(75,0,null,null,0,"i",[["class","fa fa-rupee"]],null,null,null,null,null)),(l()(),t.Mb(76,null,[" ",""])),(l()(),t.ub(77,0,null,null,55,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),t.ub(78,0,null,null,48,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.ub(79,0,null,null,10,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),t.ub(80,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Category"])),(l()(),t.ub(82,0,null,null,7,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.ub(83,0,null,null,6,"ng-multiselect-dropdown",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"]],function(l,n,e){var a=!0,r=l.component;return"blur"===n&&(a=!1!==t.Eb(l,84).onTouched()&&a),"ngModelChange"===n&&(a=!1!==(r.selectedLineCategory=e)&&a),a},u.b,u.a)),t.tb(84,49152,null,0,s.a,[t.h],{placeholder:[0,"placeholder"],settings:[1,"settings"],data:[2,"data"]},null),t.Jb(1024,null,a.n,function(l){return[l]},[s.a]),t.tb(86,671744,null,0,a.s,[[8,null],[8,null],[8,null],[6,a.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),t.Hb(87,{standalone:0}),t.Jb(2048,null,a.o,null,[a.s]),t.tb(89,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),t.ub(90,0,null,null,10,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),t.ub(91,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Bill Name"])),(l()(),t.ub(93,0,null,null,7,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.ub(94,0,null,null,6,"ng-multiselect-dropdown",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"]],function(l,n,e){var a=!0,r=l.component;return"blur"===n&&(a=!1!==t.Eb(l,95).onTouched()&&a),"ngModelChange"===n&&(a=!1!==(r.selectedLineItem=e)&&a),a},u.b,u.a)),t.tb(95,49152,null,0,s.a,[t.h],{placeholder:[0,"placeholder"],settings:[1,"settings"],data:[2,"data"]},null),t.Jb(1024,null,a.n,function(l){return[l]},[s.a]),t.tb(97,671744,null,0,a.s,[[8,null],[8,null],[8,null],[6,a.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),t.Hb(98,{standalone:0}),t.Jb(2048,null,a.o,null,[a.s]),t.tb(100,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),t.ub(101,0,null,null,7,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),t.ub(102,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Date"])),(l()(),t.ub(104,0,null,null,4,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.ub(105,0,null,null,3,"div",[["class","form-control"],["id","lDate"]],null,null,null,null,null)),(l()(),t.ub(106,0,null,null,0,"span",[["class","fa fa-calendar"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["\xa0\xa0"])),(l()(),t.ub(108,0,null,null,0,"span",[["class","date-val"]],null,null,null,null,null)),(l()(),t.ub(109,0,null,null,17,"div",[["class","col-xl-6 list-bill-search"]],null,null,null,null,null)),(l()(),t.ub(110,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),t.Mb(-1,null,["Bill Type"])),(l()(),t.ub(112,0,null,null,14,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t.ub(113,0,null,null,11,"select",[["class","form-control reports-bill-type"],["name","searchBillType"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(l,n,e){var a=!0,r=l.component;return"change"===n&&(a=!1!==t.Eb(l,114).onChange(e.target.value)&&a),"blur"===n&&(a=!1!==t.Eb(l,114).onTouched()&&a),"ngModelChange"===n&&(a=!1!==(r.searchLineBillType=e)&&a),a},null,null)),t.tb(114,16384,null,0,a.x,[t.H,t.k],null,null),t.Jb(1024,null,a.n,function(l){return[l]},[a.x]),t.tb(116,671744,null,0,a.s,[[8,null],[8,null],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Jb(2048,null,a.o,null,[a.s]),t.tb(118,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),t.ub(119,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),t.tb(120,147456,null,0,a.t,[t.k,t.H,[2,a.x]],{value:[0,"value"]},null),t.tb(121,147456,null,0,a.E,[t.k,t.H,[8,null]],{value:[0,"value"]},null),(l()(),t.Mb(-1,null,["All"])),(l()(),t.lb(16777216,null,null,1,null,x)),t.tb(124,278528,null,0,c.n,[t.S,t.P,t.t],{ngForOf:[0,"ngForOf"]},null),(l()(),t.ub(125,0,null,null,1,"button",[["class","btn btn-info reports-search-btn"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.onLineChartSearch()&&t),t},null,null)),(l()(),t.Mb(-1,null,["Search"])),(l()(),t.lb(16777216,null,null,1,null,D)),t.tb(128,16384,null,0,c.o,[t.S,t.P],{ngIf:[0,"ngIf"]},null),(l()(),t.lb(16777216,null,null,1,null,_)),t.tb(130,16384,null,0,c.o,[t.S,t.P],{ngIf:[0,"ngIf"]},null),(l()(),t.lb(16777216,null,null,1,null,S)),t.tb(132,16384,null,0,c.o,[t.S,t.P],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,3,0,"Reports","fa-bar-chart-o"),l(n,20,0,"Select Category",e.dropdownSettings,e.categoryList);var t=e.selectedPieCategory,a=l(n,23,0,!0);l(n,22,0,t,a),l(n,31,0,"Select Bill Name",e.dropdownSettings,e.itemList);var r=e.selectedPieItem,o=l(n,34,0,!0);l(n,33,0,r,o),l(n,52,0,"searchBillType",e.searchPieBillType),l(n,56,0,""),l(n,57,0,""),l(n,60,0,e.billTypes),l(n,64,0,e.isPieChartReady&&!e.showLoading4PieChart&&e.pieChartData.length>0),l(n,66,0,e.showLoading4PieChart),l(n,68,0,e.isPieChartReady&&!e.showLoading4PieChart&&0==e.pieChartData.length),l(n,84,0,"Select Category",e.dropdownSettings,e.categoryList);var i=e.selectedLineCategory,u=l(n,87,0,!0);l(n,86,0,i,u),l(n,95,0,"Select Bill Name",e.dropdownSettings,e.itemList);var s=e.selectedLineItem,c=l(n,98,0,!0);l(n,97,0,s,c),l(n,116,0,"searchBillType",e.searchLineBillType),l(n,120,0,""),l(n,121,0,""),l(n,124,0,e.billTypes),l(n,128,0,e.isLineChartReady&&!e.showLoading4LineChart&&e.lineChartData.length>0),l(n,130,0,e.showLoading4LineChart),l(n,132,0,e.isLineChartReady&&!e.showLoading4LineChart&&0==e.lineChartData.length)},function(l,n){var e=n.component;l(n,12,0,e.pieChartTotal),l(n,19,0,t.Eb(n,25).ngClassUntouched,t.Eb(n,25).ngClassTouched,t.Eb(n,25).ngClassPristine,t.Eb(n,25).ngClassDirty,t.Eb(n,25).ngClassValid,t.Eb(n,25).ngClassInvalid,t.Eb(n,25).ngClassPending),l(n,30,0,t.Eb(n,36).ngClassUntouched,t.Eb(n,36).ngClassTouched,t.Eb(n,36).ngClassPristine,t.Eb(n,36).ngClassDirty,t.Eb(n,36).ngClassValid,t.Eb(n,36).ngClassInvalid,t.Eb(n,36).ngClassPending),l(n,49,0,t.Eb(n,54).ngClassUntouched,t.Eb(n,54).ngClassTouched,t.Eb(n,54).ngClassPristine,t.Eb(n,54).ngClassDirty,t.Eb(n,54).ngClassValid,t.Eb(n,54).ngClassInvalid,t.Eb(n,54).ngClassPending),l(n,76,0,e.lineChartTotal),l(n,83,0,t.Eb(n,89).ngClassUntouched,t.Eb(n,89).ngClassTouched,t.Eb(n,89).ngClassPristine,t.Eb(n,89).ngClassDirty,t.Eb(n,89).ngClassValid,t.Eb(n,89).ngClassInvalid,t.Eb(n,89).ngClassPending),l(n,94,0,t.Eb(n,100).ngClassUntouched,t.Eb(n,100).ngClassTouched,t.Eb(n,100).ngClassPristine,t.Eb(n,100).ngClassDirty,t.Eb(n,100).ngClassValid,t.Eb(n,100).ngClassInvalid,t.Eb(n,100).ngClassPending),l(n,113,0,t.Eb(n,118).ngClassUntouched,t.Eb(n,118).ngClassTouched,t.Eb(n,118).ngClassPristine,t.Eb(n,118).ngClassDirty,t.Eb(n,118).ngClassValid,t.Eb(n,118).ngClassInvalid,t.Eb(n,118).ngClassPending)})}function k(l){return t.Ob(0,[(l()(),t.ub(0,0,null,null,1,"app-reports",[],null,null,null,w,f)),t.tb(1,4308992,null,0,d.a,[h.a,g.a,b.a,p.a],null,null)],function(l,n){l(n,1,0)},null)}var L=t.qb("app-reports",d.a,k,{},{},[])},cXLJ:function(l,n,e){"use strict";e.d(n,"a",function(){return a}),e.d(n,"b",function(){return t}),e("M0ag"),e("9HtL");var t={pvName:"View Reports"},a=function(){return function(){}}()},qb46:function(l,n,e){l.exports=function(l){"use strict";var n=(l=l&&l.hasOwnProperty("default")?l.default:l).helpers,e=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var l=window.screen;if(l)return(l.deviceXDPI||1)/(l.logicalXDPI||1)}return 1}(),t={toTextLines:function(l){var e,t=[];for(l=[].concat(l);l.length;)"string"==typeof(e=l.pop())?t.unshift.apply(t,e.split("\n")):Array.isArray(e)?l.push.apply(l,e):n.isNullOrUndef(l)||t.unshift(""+e);return t},toFontString:function(l){return!l||n.isNullOrUndef(l.size)||n.isNullOrUndef(l.family)?null:(l.style?l.style+" ":"")+(l.weight?l.weight+" ":"")+l.size+"px "+l.family},textSize:function(l,n,e){var t,a=[].concat(n),r=a.length,o=l.font,i=0;for(l.font=e.string,t=0;t<r;++t)i=Math.max(l.measureText(a[t]).width,i);return l.font=o,{height:r*e.lineHeight,width:i}},parseFont:function(e){var a=l.defaults.global,r=n.valueOrDefault(e.size,a.defaultFontSize),o={family:n.valueOrDefault(e.family,a.defaultFontFamily),lineHeight:n.options.toLineHeight(e.lineHeight,r),size:r,style:n.valueOrDefault(e.style,a.defaultFontStyle),weight:n.valueOrDefault(e.weight,null),string:""};return o.string=t.toFontString(o),o},bound:function(l,n,e){return Math.max(l,Math.min(n,e))},arrayDiff:function(l,n){var e,t,a,r,o=l.slice(),i=[];for(e=0,a=n.length;e<a;++e)-1===(t=o.indexOf(r=n[e]))?i.push([r,1]):o.splice(t,1);for(e=0,a=o.length;e<a;++e)i.push([o[e],-1]);return i},rasterize:function(l){return Math.round(l*e)/e}};function a(l,n){var e=n.x,t=n.y;if(null===e)return{x:0,y:-1};if(null===t)return{x:1,y:0};var a=l.x-e,r=l.y-t,o=Math.sqrt(a*a+r*r);return{x:o?a/o:0,y:o?r/o:-1}}var r=0,o=1,i=2,u=4,s=8;function c(l,n,e){var t=r;return l<e.left?t|=o:l>e.right&&(t|=i),n<e.top?t|=s:n>e.bottom&&(t|=u),t}function d(l,n){var e,t,a=n.anchor,r=l;return n.clamp&&(r=function(l,n){for(var e,t,a,r=l.x0,d=l.y0,h=l.x1,g=l.y1,b=c(r,d,n),p=c(h,g,n);b|p&&!(b&p);)(e=b||p)&s?(t=r+(h-r)*(n.top-d)/(g-d),a=n.top):e&u?(t=r+(h-r)*(n.bottom-d)/(g-d),a=n.bottom):e&i?(a=d+(g-d)*(n.right-r)/(h-r),t=n.right):e&o&&(a=d+(g-d)*(n.left-r)/(h-r),t=n.left),e===b?b=c(r=t,d=a,n):p=c(h=t,g=a,n);return{x0:r,x1:h,y0:d,y1:g}}(r,n.area)),"start"===a?(e=r.x0,t=r.y0):"end"===a?(e=r.x1,t=r.y1):(e=(r.x0+r.x1)/2,t=(r.y0+r.y1)/2),function(l,n,e,t,a){switch(a){case"center":e=t=0;break;case"bottom":e=0,t=1;break;case"right":e=1,t=0;break;case"left":e=-1,t=0;break;case"top":e=0,t=-1;break;case"start":e=-e,t=-t;break;case"end":break;default:a*=Math.PI/180,e=Math.cos(a),t=Math.sin(a)}return{x:l,y:n,vx:e,vy:t}}(e,t,l.vx,l.vy,n.align)}var h={arc:function(l,n){var e=(l.startAngle+l.endAngle)/2,t=Math.cos(e),a=Math.sin(e),r=l.innerRadius,o=l.outerRadius;return d({x0:l.x+t*r,y0:l.y+a*r,x1:l.x+t*o,y1:l.y+a*o,vx:t,vy:a},n)},point:function(l,n){var e=a(l,n.origin),t=e.x*l.radius,r=e.y*l.radius;return d({x0:l.x-t,y0:l.y-r,x1:l.x+t,y1:l.y+r,vx:e.x,vy:e.y},n)},rect:function(l,n){var e=a(l,n.origin),t=l.x,r=l.y,o=0,i=0;return l.horizontal?(t=Math.min(l.x,l.base),o=Math.abs(l.base-l.x)):(r=Math.min(l.y,l.base),i=Math.abs(l.base-l.y)),d({x0:t,y0:r+i,x1:t+o,y1:r,vx:e.x,vy:e.y},n)},fallback:function(l,n){var e=a(l,n.origin);return d({x0:l.x,y0:l.y,x1:l.x,y1:l.y,vx:e.x,vy:e.y},n)}},g=l.helpers,b=t.rasterize;function p(l){var n=l._model.horizontal,e=l._scale||n&&l._xScale||l._yScale;if(!e)return null;if(void 0!==e.xCenter&&void 0!==e.yCenter)return{x:e.xCenter,y:e.yCenter};var t=e.getBasePixel();return n?{x:t,y:null}:{x:null,y:t}}function f(l,n,e){var t=l.shadowBlur,a=e.stroked,r=b(e.x),o=b(e.y),i=b(e.w);a&&l.strokeText(n,r,o,i),e.filled&&(t&&a&&(l.shadowBlur=0),l.fillText(n,r,o,i),t&&a&&(l.shadowBlur=t))}var v=function(l,n,e,t){var a=this;a._config=l,a._index=t,a._model=null,a._rects=null,a._ctx=n,a._el=e};g.extend(v.prototype,{_modelize:function(n,e,a,r){var o,i=this._index,u=g.options.resolve,s=t.parseFont(u([a.font,{}],r,i)),c=u([a.color,l.defaults.global.defaultFontColor],r,i);return{align:u([a.align,"center"],r,i),anchor:u([a.anchor,"center"],r,i),area:r.chart.chartArea,backgroundColor:u([a.backgroundColor,null],r,i),borderColor:u([a.borderColor,null],r,i),borderRadius:u([a.borderRadius,0],r,i),borderWidth:u([a.borderWidth,0],r,i),clamp:u([a.clamp,!1],r,i),clip:u([a.clip,!1],r,i),color:c,display:n,font:s,lines:e,offset:u([a.offset,0],r,i),opacity:u([a.opacity,1],r,i),origin:p(this._el),padding:g.options.toPadding(u([a.padding,0],r,i)),positioner:(o=this._el,o instanceof l.elements.Arc?h.arc:o instanceof l.elements.Point?h.point:o instanceof l.elements.Rectangle?h.rect:h.fallback),rotation:u([a.rotation,0],r,i)*(Math.PI/180),size:t.textSize(this._ctx,e,s),textAlign:u([a.textAlign,"start"],r,i),textShadowBlur:u([a.textShadowBlur,0],r,i),textShadowColor:u([a.textShadowColor,c],r,i),textStrokeColor:u([a.textStrokeColor,c],r,i),textStrokeWidth:u([a.textStrokeWidth,0],r,i)}},update:function(l){var n,e,a,r=this,o=null,i=null,u=r._index,s=r._config,c=g.options.resolve([s.display,!0],l,u);c&&(e=g.valueOrDefault(g.callback(s.formatter,[n=l.dataset.data[u],l]),n),(a=g.isNullOrUndef(e)?[]:t.toTextLines(e)).length&&(i=function(l){var n=l.borderWidth||0,e=l.padding,t=l.size.height,a=l.size.width,r=-a/2,o=-t/2;return{frame:{x:r-e.left-n,y:o-e.top-n,w:a+e.width+2*n,h:t+e.height+2*n},text:{x:r,y:o,w:a,h:t}}}(o=r._modelize(c,a,s,l)))),r._model=o,r._rects=i},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(l,n){var e,a=l.ctx,r=this._model,o=this._rects;this.visible()&&(a.save(),r.clip&&(e=r.area,a.beginPath(),a.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),a.clip()),a.globalAlpha=t.bound(0,r.opacity,1),a.translate(b(n.x),b(n.y)),a.rotate(r.rotation),function(l,n,e){var t=e.backgroundColor,a=e.borderColor,r=e.borderWidth;(t||a&&r)&&(l.beginPath(),g.canvas.roundedRect(l,b(n.x)+r/2,b(n.y)+r/2,b(n.w)-r,b(n.h)-r,e.borderRadius),l.closePath(),t&&(l.fillStyle=t,l.fill()),a&&r&&(l.strokeStyle=a,l.lineWidth=r,l.lineJoin="miter",l.stroke()))}(a,o.frame,r),function(l,n,e,t){var a,r=t.textAlign,o=t.color,i=!!o,u=t.font,s=n.length,c=t.textStrokeColor,d=t.textStrokeWidth,h=c&&d;if(s&&(i||h))for(e=function(l,n,e){var t=e.lineHeight,a=l.w,r=l.x;return"center"===n?r+=a/2:"end"!==n&&"right"!==n||(r+=a),{h:t,w:a,x:r,y:l.y+t/2}}(e,r,u),l.font=u.string,l.textAlign=r,l.textBaseline="middle",l.shadowBlur=t.textShadowBlur,l.shadowColor=t.textShadowColor,i&&(l.fillStyle=o),h&&(l.lineJoin="round",l.lineWidth=d,l.strokeStyle=c),a=0,s=n.length;a<s;++a)f(l,n[a],{stroked:h,filled:i,w:e.w,x:e.x,y:e.y+e.h*a})}(a,r.lines,o.text,r),a.restore())}});var y=Number.MIN_SAFE_INTEGER||-9007199254740991,C=Number.MAX_SAFE_INTEGER||9007199254740991;function m(l,n,e){var t=Math.cos(e),a=Math.sin(e),r=n.x,o=n.y;return{x:r+t*(l.x-r)-a*(l.y-o),y:o+a*(l.x-r)+t*(l.y-o)}}function x(l,n){var e,t,a,r=C,o=y,i=n.origin;for(e=0;e<l.length;++e)a=n.vx*((t=l[e]).x-i.x)+n.vy*(t.y-i.y),r=Math.min(r,a),o=Math.max(o,a);return{min:r,max:o}}function D(l,n){var e=n.x-l.x,t=n.y-l.y,a=Math.sqrt(e*e+t*t);return{vx:(n.x-l.x)/a,vy:(n.y-l.y)/a,origin:l,ln:a}}var _=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function S(l,n,e){var t=n.positioner(l,n),a=t.vx,r=t.vy;if(!a&&!r)return{x:t.x,y:t.y};var o=e.w,i=e.h,u=n.rotation,s=Math.abs(o/2*Math.cos(u))+Math.abs(i/2*Math.sin(u)),c=Math.abs(o/2*Math.sin(u))+Math.abs(i/2*Math.cos(u)),d=1/Math.max(Math.abs(a),Math.abs(r));return s*=a*d,c*=r*d,{x:t.x+(s+=n.offset*a),y:t.y+(c+=n.offset*r)}}l.helpers.extend(_.prototype,{center:function(){var l=this._rect;return{x:l.x+l.w/2,y:l.y+l.h/2}},update:function(l,n,e){this._rotation=e,this._rect={x:n.x+l.x,y:n.y+l.y,w:n.w,h:n.h}},contains:function(l){var n=this._rect;return!((l=m(l,this.center(),-this._rotation)).x<n.x-1||l.y<n.y-1||l.x>n.x+n.w+2||l.y>n.y+n.h+2)},intersects:function(l){var n,e,t,a=this._points(),r=l._points(),o=[D(a[0],a[1]),D(a[0],a[3])];for(this._rotation!==l._rotation&&o.push(D(r[0],r[1]),D(r[0],r[3])),n=0;n<o.length;++n)if(e=x(a,o[n]),t=x(r,o[n]),e.max<t.min||t.max<e.min)return!1;return!0},_points:function(){var l=this._rect,n=this._rotation,e=this.center();return[m({x:l.x,y:l.y},e,n),m({x:l.x+l.w,y:l.y},e,n),m({x:l.x+l.w,y:l.y+l.h},e,n),m({x:l.x,y:l.y+l.h},e,n)]}});var w={prepare:function(l){var n,e,t,a,r,o=[];for(n=0,t=l.length;n<t;++n)for(e=0,a=l[n].length;e<a;++e)o.push(r=l[n][e]),r.$layout={_box:new _,_hidable:!1,_visible:!0,_set:n,_idx:e};return o.sort(function(l,n){var e=l.$layout,t=n.$layout;return e._idx===t._idx?e._set-t._set:t._idx-e._idx}),this.update(o),o},update:function(l){var n,e,t,a,r,o=!1;for(n=0,e=l.length;n<e;++n)a=(t=l[n]).model(),(r=t.$layout)._hidable=a&&"auto"===a.display,r._visible=t.visible(),o|=r._hidable;o&&function(l){var n,e,t,a,r,o;for(n=0,e=l.length;n<e;++n)(a=(t=l[n]).$layout)._visible&&(r=t.geometry(),o=S(t._el._model,t.model(),r),a._box.update(o,r,t.rotation()));!function(l,n){var e,t,a,r;for(e=l.length-1;e>=0;--e)for(a=l[e].$layout,t=e-1;t>=0&&a._visible;--t)(r=l[t].$layout)._visible&&a._box.intersects(r._box)&&n(a,r)}(l,function(l,n){var e=l._hidable,t=n._hidable;e&&t||t?n._visible=!1:e&&(l._visible=!1)})}(l)},lookup:function(l,n){var e,t;for(e=l.length-1;e>=0;--e)if((t=l[e].$layout)&&t._visible&&t._box.contains(n))return{dataset:t._set,label:l[e]};return null},draw:function(l,n){var e,t,a,r,o,i;for(e=0,t=n.length;e<t;++e)(r=(a=n[e]).$layout)._visible&&(o=a.geometry(),i=S(a._el._view,a.model(),o),r._box.update(i,o,a.rotation()),a.draw(l,i))}},k=l.helpers,L=l.helpers,B="$datalabels";function P(l,n,e){var t=n&&n[e.dataset];if(t){var a=e.label,r=a.$context;!0===L.callback(t,[r])&&(l[B]._dirty=!0,a.update(r))}}l.defaults.global.plugins.datalabels={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(l){if(k.isNullOrUndef(l))return null;var n,e,t,a=l;if(k.isObject(l))if(k.isNullOrUndef(l.label))if(k.isNullOrUndef(l.r))for(a="",t=0,e=(n=Object.keys(l)).length;t<e;++t)a+=(0!==t?", ":"")+n[t]+": "+l[n[t]];else a=l.r;else a=l.label;return""+a},listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0};var M={id:"datalabels",beforeInit:function(l){l[B]={_actives:[]}},beforeUpdate:function(l){var n=l[B];n._listened=!1,n._listeners={},n._datasets=[],n._labels=[]},afterDatasetUpdate:function(l,n,e){var t,a,r,o=n.index,i=l[B],u=i._datasets[o]=[],s=l.isDatasetVisible(o),c=l.data.datasets[o],d=function(l,n){var e=l.datalabels;return!1===e?null:(!0===e&&(e={}),L.merge({},[n,e]))}(c,e),h=n.meta.data||[],g=h.length,b=l.ctx;for(b.save(),t=0;t<g;++t)a=h[t],s&&a&&!a.hidden&&!a._model.skip?(u.push(r=new v(d,b,a,t)),r.update(r.$context={active:!1,chart:l,dataIndex:t,dataset:c,datasetIndex:o})):r=null,a[B]=r;b.restore(),L.merge(i._listeners,d.listeners||{},{merger:function(l,e,t){e[l]=e[l]||{},e[l][n.index]=t[l],i._listened=!0}})},afterUpdate:function(l,n){l[B]._labels=w.prepare(l[B]._datasets,n)},afterDatasetsDraw:function(l){w.draw(l,l[B]._labels)},beforeEvent:function(l,n){if(l[B]._listened)switch(n.type){case"mousemove":case"mouseout":!function(l,n){var e,t,a=l[B],r=a._listeners;if(r.enter||r.leave){if("mousemove"===n.type)t=w.lookup(a._labels,n);else if("mouseout"!==n.type)return;e=a._hovered,a._hovered=t,function(l,n,e,t){var a,r;(e||t)&&(e?t?e.label!==t.label&&(r=a=!0):r=!0:a=!0,r&&P(l,n.leave,e),a&&P(l,n.enter,t))}(l,r,e,t)}}(l,n);break;case"click":!function(l,n){var e=l[B],t=e._listeners.click,a=t&&w.lookup(e._labels,n);a&&P(l,t,a)}(l,n)}},afterEvent:function(n){var e,a,r,o,i=n[B],u=i._actives,s=i._actives=n.lastActive||[],c=t.arrayDiff(u,s);for(e=0,a=c.length;e<a;++e)(r=c[e])[1]&&(o=r[0][B])&&(o.$context.active=1===r[1],o.update(o.$context));(i._dirty||c.length)&&(w.update(i._labels),function(n){if(!n.animating){for(var e=l.animationService.animations,t=0,a=e.length;t<a;++t)if(e[t].chart===n)return;n.render({duration:1,lazy:!0})}}(n)),delete i._dirty}};return l.plugins.register(M),M}(e("MO+k"))}}]);