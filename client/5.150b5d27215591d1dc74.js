(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"9HtL":function(l,e,t){"use strict";t.d(e,"a",function(){return o}),t("b4/y"),t("POfX"),t("gbi4"),t("MO+k");var n=t("qb46"),r=t("wd/R"),a=(t("xIcu"),function(l,e,t,n){return new(t||(t=Promise))(function(r,a){function o(l){try{u(n.next(l))}catch(e){a(e)}}function i(l){try{u(n.throw(l))}catch(e){a(e)}}function u(l){l.done?r(l.value):new t(function(e){e(l.value)}).then(o,i)}u((n=n.apply(l,e||[])).next())})}),o=function(){function l(l,e,t,r){var a=this;this._billService=l,this._categoryService=e,this._commonService=t,this._itemService=r,this.categoryList=[],this.mappedCategoryList={},this.selectedPieCategory=[],this.selectedLineCategory=[],this.searchPieBillType="expense",this.searchLineBillType="expense",this.itemList=[],this.selectedPieItem=[],this.selectedLineItem=[],this.lineChartTotal=0,this.pieChartTotal=0,this.isLineChartReady=!1,this.isPieChartReady=!1,this.monthYearSpiliter=" ",this.maxDatePeriodCount=70,this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.billTypes=[{groupText:"Expense",groupName:"expense"},{groupText:"Income",groupName:"income"}],this.lineChartData=[],this.lineChartLabels=[],this.lineChartOptions={responsive:!0},this.colors=[{backgroundColor:"rgba(0,247,255, 0.2)",borderColor:"rgba(0,247,255, 1)",pointBackgroundColor:"rgba(0,247,255, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(0,247,255, 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(196,255,77,0.2)",borderColor:"rgba(196,255,77, 1)",pointBackgroundColor:"rgba(77,83,96,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(196,255,77, 1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(255,77,77,0.2)",borderColor:"rgba(255,77,77,1)",pointBackgroundColor:"rgba(255,77,77,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(255,77,77,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(255,255,0, 0.2)",borderColor:"rgba(255,255,0,1)",pointBackgroundColor:"rgba(255,255,0 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(255,255,0,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(85,255,0, 0.2)",borderColor:"rgba(85,255,0, 1)",pointBackgroundColor:"rgba(85,255,0, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(85,255,0, 1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(255,230,255,0.2)",borderColor:"rgba(255,25,255,1)",pointBackgroundColor:"rgba(255,25,255,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(255,25,255,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(102,204,255, 0.2)",borderColor:"rgba(102,204,255, 1)",pointBackgroundColor:"rgba(102,204,255, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(102,204,255, 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(222, 218, 218, 0.2)",borderColor:"rgba(222, 218, 218, 1)",pointBackgroundColor:"rgba(26,0,26,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(222, 218, 218, 1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(26,0,153,0.2)",borderColor:"rgba(26,0,153,1)",pointBackgroundColor:"rgba(26,0,153,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(26,0,153,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(179,0,59,0.2)",borderColor:"rgba(179,0,59 1)",pointBackgroundColor:"rgba(179,0,59, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(179,0,59 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(0, 77, 51, 0.2)",borderColor:"rgba(0,77,51, 1)",pointBackgroundColor:"rgba(0,77,51, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(0,77,51, 1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(25,58,25,0.2)",borderColor:"rgba(25,58,25,1)",pointBackgroundColor:"rgba(25,58,25,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(25,58,25,1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(102,204,0,0.2)",borderColor:"rgba(102,204,0, 1)",pointBackgroundColor:"rgba(102,204,0, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(102,204,0, 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{backgroundColor:"rgba(153,0,0, 0.2)",borderColor:"rgba(153,0,0,1)",pointBackgroundColor:"rgba(153,0,0, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(153,0,0,1)",pointHoverBorderColor:"rgba(77,83,96,1)"},{backgroundColor:"rgba(244, 173, 66, 0.2)",borderColor:"rgba(244, 173, 66, 1)",pointBackgroundColor:"rgba(244, 173, 66, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"rgba(244, 173, 66, 1)",pointHoverBorderColor:"rgba(148,159,177,0.8)"}],this.lineChartColors=this.colors.slice(),this.pieChartColors=[{backgroundColor:["rgba(255,0,0,0.3)","rgba(0,255,0,0.3)","rgba(0,0,255,0.3)","rgb(51, 153, 102)","rgb(236, 179, 255)","rgb(204, 204, 255)","rgb(255, 255, 179)","rgb(194, 194, 163)","rgb(102, 255, 255)","rgb(0, 115, 230)","rgb(255, 153, 153)","rgb(255, 102, 179)","rgb(255, 85, 0)","rgb(159, 223, 191)","rgb(255, 140, 102)"]}],this.pieChartOptions={responsive:!0,legend:{position:"top"},plugins:{datalabels:{formatter:function(l,e){return e.chart.data.labels[e.dataIndex]}}}},this.pieChartLabels=[],this.pieChartData=[],this.pieChartLegend=!0,this.pieChartPlugins=[n],this.dropdownSettings={singleSelection:!1,idField:"_id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:2,allowpieSearchFilter:!0,searchAutofocus:!0},this.lineSearchFilter={},this.pieSearchFilter={},this.getDefaultDataset().then(function(l){a.init()})}return l.prototype.ngOnInit=function(){this.pieChartType="pie",this.lineChartLegend=!0,this.lineChartType="line"},l.prototype.setDeafaultCategoryList=function(l){this.categoryList=l,this.selectedLineCategory=this.selectedPieCategory=l.slice(0,4),this.mappedCategoryList=this._commonService.createHasMap(this.categoryList,"_id")},l.prototype.groupByFields=function(l,e,t){var n={};if(l.length>0){var r=this;l.forEach(function(l){if(l[e]&&l[t]){var a=r.mappedCategoryList[l[e]].name;n[a]?n[a]+=l[t]:n[a]=l[t]}})}return n},l.prototype.setDefaultSearchFilter=function(l,e,t){var n;return(n=this._commonService.filterByFieldName("pie"==e?"category"==t?this.selectedPieCategory:this.selectedPieItem:"category"==t?this.selectedLineCategory:this.selectedLineItem,"_id")).length>0&&(l[t]=n),console.log("filter: ",n),n},l.prototype.init=function(){this.loadLineChart(),this.loadPieData()},l.prototype.loadPieData=function(){this.setDefaultSearchFilter(this.pieSearchFilter,"pie","category"),this.pieSearchFilter.type=this.searchPieBillType,this.setDefaultSearchFilter(this.pieSearchFilter,"pie","item"),this.getPieDataSet()},l.prototype.getPieDataSet=function(){var l=this;this.getBillDetails(this.pieSearchFilter).then(function(e){l.pieChartData=e;var t=l.groupByFields(l.pieChartData,"_category","amount");l.updatePieDataSet(t)})},l.prototype.loadLineChart=function(){this.setDefaultSearchFilter(this.lineSearchFilter,"line","category"),this.lineSearchFilter.type=this.searchLineBillType,this.setDefaultSearchFilter(this.lineSearchFilter,"line","item"),this.getLineDataSet()},l.prototype.getLineDataSet=function(){var l=this;console.log("line Filter: ",this.lineSearchFilter),this.getBillDetails(this.lineSearchFilter).then(function(e){console.log("bill data: ",e),l.initializeLineChart(e)})},l.prototype.initializeLineChart=function(l){var e=this.getLineChartDatePeriodType(),t=this.getLinChartXaxisPeriods(e),n=this.getLineChartYaxisData(l,t,e);console.log("typeDetails: ",e,"xAxis: ",t,"yAxis: ",n),this.updateLineChartDataSet(t,n)},l.prototype.chartClicked=function(l){},l.prototype.chartHovered=function(l){},l.prototype.updateLineChartDataSet=function(l,e){console.log("updateLineChartDataSet labelData:",l,"labelValues:",e),this.lineChartLabels.length=0,this.lineChartData.length=0;var t=e.length>l.length?e.length:l.length;if(t>0){for(var n=0;n<t;n++)void 0!==l[n]&&""!=l[n]&&this.lineChartLabels.push(l[n]),void 0!==e[n]&&""!=e[n]&&(this.lineChartData.push(e[n]),void 0!==this.colors[n]&&""!=this.colors[n]&&this.lineChartColors.push(this.colors[n]));this.isLineChartReady=!0}console.log(this.lineChartLabels,this.lineChartData,this.lineChartColors)},l.prototype.getTotalAmountBetweenDates=function(l,e,t,n){var r=this;void 0===n&&(n=!0);var a=0,o="",i="";if(n){var u=this._commonService.getStartAndEndTimeStamp(t);o=u.dateFrom,i=u.dateTo}else{var s=new Date(t),c=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0);o=c.getTime();var d=new Date(s.getFullYear(),s.getMonth(),s.getDate(),23,59);i=d.getTime(),"2019-05-07"==t&&console.log("startDay:",c,"endDay:",d,"fromDateTimeStamp: ",o,"toDateTimeStamp:",i)}return l.length>0&&l.forEach(function(l){var t=r._commonService.formatDate(l.purchased_date),n=new Date(t).getTime();l._category==e&&o<n&&i>n&&(a+=l.amount)}),a},l.prototype.updateLineChart=function(){var l=["aaa","bbb"],e=[{data:[22,33],label:"Series 1"},{data:[2,93],label:"Series 2"}];this.lineChartLabels.length=0,this.lineChartData.length=0,this.lineChartColors.length=0;var t=this;l.length>0&&(l.forEach(function(l,n){t.lineChartLabels.push(l),console.log("push: ",e[n]),t.lineChartData.push(e[n]),t.lineChartColors.push(t.colors[n])}),this.isLineChartReady=!0)},l.prototype.getLineChartYaxisData=function(l,e,t){var n=[],r=this.selectedLineCategory.length>0?this.selectedLineCategory:this.categoryList;console.log("getLineChartYaxisData category: ",r),this.lineChartTotal=0;for(var a=0;a<r.length;a++){for(var o={data:[],label:r[a].name},i=0;i<e.length;i++){var u=this.getTotalAmountBetweenDates(l,r[a]._id,e[i],"daily"!=t.type);this.lineChartTotal+=u,o.data.push(u)}n.push(o)}return n},l.prototype.getLineChartDatePeriodType=function(){var l=12,e={type:""};if(console.log("getLineChartDatePeriodType: ",this.lineSearchFilter),void 0===this.lineSearchFilter.purchased_date||""==this.lineSearchFilter.purchased_date)e.type="daily";else{var t=this._commonService.daysBetween(this.lineSearchFilter.purchased_date.dateFrom,this.lineSearchFilter.purchased_date.dateTo);console.log("dateDiff: ",t),t>this.maxDatePeriodCount?(e.type="monthly",l=Math.round(t/20),e.duration=l):e.type="daily"}return console.log("getLineChartDatePeriodType resp: ",e),e},l.prototype.getLinChartXaxisPeriods=function(l){var e=[];if("monthly"==l.type)e=this._commonService.getMonthList(l.duration);else{var t=new Date(this.lineSearchFilter.purchased_date.dateFrom),n=new Date(this.lineSearchFilter.purchased_date.dateTo);e=this._commonService.getDates(t,n)}return e},l.prototype.getBillDetails=function(l){var e=this;return new Promise(function(t,n){e._billService.getBillsListWithSearch({filter:l,sumByBillDate:!0}).subscribe(function(l){t(l.result&&l.result.data?l.result.data:[])})})},l.prototype.updatePieDataSet=function(l){var e=Object.keys(l),t=this._commonService.getObjectValues(l);console.log("updatePieDataSet labelData: ",e,"labelValues:",t,"data:",l),this.pieChartLabels.length=0,this.pieChartData.length=0;var n=this;e.length>0&&(n.pieChartTotal=0,e.forEach(function(l,e){n.pieChartLabels.push(l),n.pieChartData.push(t[e]),n.pieChartTotal+=t[e]}),this.isPieChartReady=!0)},l.prototype.getDefaultDataset=function(){return a(this,void 0,void 0,function(){var l,e,t;return function(l,e){var t,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(l,o)}catch(i){a=[6,i],n=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}(this,function(n){switch(n.label){case 0:return[4,this._categoryService.getCategoryList().toPromise()];case 1:return l=n.sent(),e=l.result&&l.result.data?l.result.data:[],[4,this._itemService.getItemList().toPromise()];case 2:return t=n.sent(),this.itemList=t.result&&t.result.data?t.result.data:[],this.setDeafaultCategoryList(e),[2]}})})},l.prototype.onLineChartSearch=function(){this.selectedLineItem.length>0?this.lineSearchFilter.name=this._commonService.filterByFieldName(this.selectedLineItem,"_id"):delete this.lineSearchFilter.name,this.searchLineBillType?this.lineSearchFilter.type=this.searchLineBillType:delete this.lineSearchFilter.type,this.selectedLineCategory.length>0?this.lineSearchFilter.category=this._commonService.filterByFieldName(this.selectedLineCategory,"_id"):delete this.lineSearchFilter.category,this.getLineDataSet()},l.prototype.onPieChartSearch=function(){this.selectedPieItem.length>0?this.pieSearchFilter.name=this._commonService.filterByFieldName(this.selectedPieItem,"_id"):delete this.pieSearchFilter.name,this.searchPieBillType?this.pieSearchFilter.type=this.searchPieBillType:delete this.pieSearchFilter.type,this.selectedPieCategory.length>0?this.pieSearchFilter.category=this._commonService.filterByFieldName(this.selectedPieCategory,"_id"):delete this.pieSearchFilter.category,console.log("before ",this.pieSearchFilter),this.getPieDataSet()},l.prototype.triggerDatePicker1=function(){var l=this,e=r().subtract(6,"days").format("YYYY-MM-DD HH:mm"),t=r(e).utc().valueOf(),n=r().format("YYYY-MM-DD HH:mm"),a=r(n).utc().valueOf();this.pieSearchFilter.purchased_date={dateFrom:t,dateTo:a},this.lineSearchFilter.purchased_date={dateFrom:t,dateTo:a},console.log("defaultToDate: ",n,"defaultStartDate:",e),this._commonService.initializeDateRangePicker("pDate",{restrictFutureDate:!0,defaultDates:{startDate:new Date(e),endDate:new Date(n)}}).subscribe(function(e){console.log("pie chart dates: ",e),l.pieSearchFilter.purchased_date={dateFrom:e.startDate,dateTo:e.endDate}}),this._commonService.initializeDateRangePicker("lDate",{restrictFutureDate:!0}).subscribe(function(e){console.log("line chart dates: ",e),l.lineSearchFilter.purchased_date={dateFrom:e.startDate,dateTo:e.endDate}})},l.prototype.triggerDatePicker=function(){var l=this,e=r().subtract(6,"days").format("YYYY-MM-DD HH:mm"),t=r(e).utc().valueOf(),n=r().format("YYYY-MM-DD HH:mm"),a=r(n).utc().valueOf();this.pieSearchFilter.purchased_date={dateFrom:t,dateTo:a},this.lineSearchFilter.purchased_date={dateFrom:t,dateTo:a},console.log("triggerDatePicker defaultToDate: ",n,"defaultStartDate:",e),this._commonService.initializeDateRangePicker("pDate",{restrictFutureDate:!0,defaultDates:{startDate:new Date(e),endDate:new Date(n)}}).subscribe(function(e){console.log("pie chart dates: ",e),l.pieSearchFilter.purchased_date={dateFrom:e.startDate,dateTo:e.endDate}}),this._commonService.initializeDateRangePicker("lDate",{restrictFutureDate:!0,defaultDates:{startDate:new Date(e),endDate:new Date(n)}}).subscribe(function(e){console.log("line chart dates: ",e),l.lineSearchFilter.purchased_date={dateFrom:e.startDate,dateTo:e.endDate}}),this._commonService.setDateRangeValInDatePicker("pDate",e,n),this._commonService.setDateRangeValInDatePicker("lDate",e,n)},l.prototype.ngAfterViewInit=function(){this.triggerDatePicker()},l}()},Ll2n:function(l,e,t){"use strict";t.d(e,"a",function(){return n});var n=function(){return function(){}}()},"Ui/4":function(l,e,t){"use strict";var n=t("CcnG"),r=t("gIcY"),a=t("Zseb"),o=t("rMXk"),i=t("3zLz"),u=t("m/DL"),s=t("5NQ/"),c=t("Ip0R"),d=t("9HtL"),h=t("b4/y"),g=t("POfX"),b=t("gbi4"),p=t("xIcu");t.d(e,"a",function(){return D});var f=n.sb({encapsulation:0,styles:[[".reports-bill-type[_ngcontent-%COMP%]{width:70%;float:left}.reports-search-btn[_ngcontent-%COMP%]{margin-left:5%;width:25%;float:left}"]],data:{animation:[{type:7,name:"routerTransition",definitions:[],options:{}}]}});function v(l){return n.Ob(0,[(l()(),n.ub(0,0,null,null,3,"option",[],null,null,null,null,null)),n.tb(1,147456,null,0,r.t,[n.k,n.H,[2,r.x]],{value:[0,"value"]},null),n.tb(2,147456,null,0,r.E,[n.k,n.H,[8,null]],{value:[0,"value"]},null),(l()(),n.Mb(3,null,["",""]))],function(l,e){l(e,1,0,e.context.$implicit.groupName),l(e,2,0,e.context.$implicit.groupName)},function(l,e){l(e,3,0,e.context.$implicit.groupText)})}function y(l){return n.Ob(0,[(l()(),n.ub(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),n.ub(1,0,null,null,1,"canvas",[["baseChart",""]],null,null,null,null,null)),n.tb(2,999424,[[1,4]],0,a.a,[n.k,a.c],{data:[0,"data"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],colors:[4,"colors"],legend:[5,"legend"],plugins:[6,"plugins"]},null)],function(l,e){var t=e.component;l(e,2,0,t.pieChartData,t.pieChartLabels,t.pieChartOptions,t.pieChartType,t.pieChartColors,t.pieChartLegend,t.pieChartPlugins)},null)}function C(l){return n.Ob(0,[(l()(),n.ub(0,0,null,null,3,"option",[],null,null,null,null,null)),n.tb(1,147456,null,0,r.t,[n.k,n.H,[2,r.x]],{value:[0,"value"]},null),n.tb(2,147456,null,0,r.E,[n.k,n.H,[8,null]],{value:[0,"value"]},null),(l()(),n.Mb(3,null,["",""]))],function(l,e){l(e,1,0,e.context.$implicit.groupName),l(e,2,0,e.context.$implicit.groupName)},function(l,e){l(e,3,0,e.context.$implicit.groupText)})}function m(l){return n.Ob(0,[(l()(),n.ub(0,0,null,null,2,"div",[["class","line-chart-dataset"]],null,null,null,null,null)),(l()(),n.ub(1,0,null,null,1,"canvas",[["baseChart",""],["height","250"]],null,null,null,null,null)),n.tb(2,999424,[[1,4]],0,a.a,[n.k,a.c],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],colors:[4,"colors"],legend:[5,"legend"],plugins:[6,"plugins"]},null)],function(l,e){var t=e.component;l(e,2,0,t.lineChartData,t.lineChartLabels,t.lineChartOptions,t.lineChartType,t.lineChartColors,t.lineChartLegend,t.lineChartPlugins)},null)}function x(l){return n.Ob(0,[n.Kb(671088640,1,{chart:0}),(l()(),n.ub(1,0,null,null,123,"div",[],null,null,null,null,null)),(l()(),n.ub(2,0,null,null,1,"app-page-header",[],null,null,null,o.b,o.a)),n.tb(3,114688,null,0,i.a,[],{heading:[0,"heading"],icon:[1,"icon"]},null),(l()(),n.ub(4,0,null,null,120,"div",[["class","row"]],null,null,null,null,null)),(l()(),n.ub(5,0,null,null,59,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),n.ub(6,0,null,null,58,"div",[["class","card mb-3"]],null,null,null,null,null)),(l()(),n.ub(7,0,null,null,5,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,[" Overall Report "])),(l()(),n.ub(9,0,null,null,3,"span",[["class","pull-right"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Total: "])),(l()(),n.ub(11,0,null,null,0,"i",[["class","fa fa-rupee"]],null,null,null,null,null)),(l()(),n.Mb(12,null,[" ",""])),(l()(),n.ub(13,0,null,null,51,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),n.ub(14,0,null,null,48,"div",[["class","row"]],null,null,null,null,null)),(l()(),n.ub(15,0,null,null,10,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),n.ub(16,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Category"])),(l()(),n.ub(18,0,null,null,7,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),n.ub(19,0,null,null,6,"ng-multiselect-dropdown",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"]],function(l,e,t){var r=!0,a=l.component;return"blur"===e&&(r=!1!==n.Eb(l,20).onTouched()&&r),"ngModelChange"===e&&(r=!1!==(a.selectedPieCategory=t)&&r),r},u.b,u.a)),n.tb(20,49152,null,0,s.a,[n.h],{placeholder:[0,"placeholder"],settings:[1,"settings"],data:[2,"data"]},null),n.Jb(1024,null,r.n,function(l){return[l]},[s.a]),n.tb(22,671744,null,0,r.s,[[8,null],[8,null],[8,null],[6,r.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),n.Hb(23,{standalone:0}),n.Jb(2048,null,r.o,null,[r.s]),n.tb(25,16384,null,0,r.p,[[4,r.o]],null,null),(l()(),n.ub(26,0,null,null,10,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),n.ub(27,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Name"])),(l()(),n.ub(29,0,null,null,7,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),n.ub(30,0,null,null,6,"ng-multiselect-dropdown",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"]],function(l,e,t){var r=!0,a=l.component;return"blur"===e&&(r=!1!==n.Eb(l,31).onTouched()&&r),"ngModelChange"===e&&(r=!1!==(a.selectedPieItem=t)&&r),r},u.b,u.a)),n.tb(31,49152,null,0,s.a,[n.h],{placeholder:[0,"placeholder"],settings:[1,"settings"],data:[2,"data"]},null),n.Jb(1024,null,r.n,function(l){return[l]},[s.a]),n.tb(33,671744,null,0,r.s,[[8,null],[8,null],[8,null],[6,r.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),n.Hb(34,{standalone:0}),n.Jb(2048,null,r.o,null,[r.s]),n.tb(36,16384,null,0,r.p,[[4,r.o]],null,null),(l()(),n.ub(37,0,null,null,7,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),n.ub(38,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Date"])),(l()(),n.ub(40,0,null,null,4,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),n.ub(41,0,null,null,3,"div",[["class","form-control"],["id","pDate"]],null,null,null,null,null)),(l()(),n.ub(42,0,null,null,0,"span",[["class","fa fa-calendar"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["\xa0\xa0"])),(l()(),n.ub(44,0,null,null,0,"span",[["class","date-val"]],null,null,null,null,null)),(l()(),n.ub(45,0,null,null,17,"div",[["class","col-xl-6 list-bill-search"]],null,null,null,null,null)),(l()(),n.ub(46,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Bill Type"])),(l()(),n.ub(48,0,null,null,14,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),n.ub(49,0,null,null,11,"select",[["class","form-control reports-bill-type"],["name","searchBillType"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(l,e,t){var r=!0,a=l.component;return"change"===e&&(r=!1!==n.Eb(l,50).onChange(t.target.value)&&r),"blur"===e&&(r=!1!==n.Eb(l,50).onTouched()&&r),"ngModelChange"===e&&(r=!1!==(a.searchPieBillType=t)&&r),r},null,null)),n.tb(50,16384,null,0,r.x,[n.H,n.k],null,null),n.Jb(1024,null,r.n,function(l){return[l]},[r.x]),n.tb(52,671744,null,0,r.s,[[8,null],[8,null],[8,null],[6,r.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),n.Jb(2048,null,r.o,null,[r.s]),n.tb(54,16384,null,0,r.p,[[4,r.o]],null,null),(l()(),n.ub(55,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),n.tb(56,147456,null,0,r.t,[n.k,n.H,[2,r.x]],{value:[0,"value"]},null),n.tb(57,147456,null,0,r.E,[n.k,n.H,[8,null]],{value:[0,"value"]},null),(l()(),n.Mb(-1,null,["All"])),(l()(),n.lb(16777216,null,null,1,null,v)),n.tb(60,278528,null,0,c.n,[n.S,n.P,n.t],{ngForOf:[0,"ngForOf"]},null),(l()(),n.ub(61,0,null,null,1,"button",[["class","btn btn-info reports-search-btn"],["type","button"]],null,[[null,"click"]],function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.onPieChartSearch()&&n),n},null,null)),(l()(),n.Mb(-1,null,["Search"])),(l()(),n.lb(16777216,null,null,1,null,y)),n.tb(64,16384,null,0,c.o,[n.S,n.P],{ngIf:[0,"ngIf"]},null),(l()(),n.ub(65,0,null,null,59,"div",[["class","col-lg-6"]],null,null,null,null,null)),(l()(),n.ub(66,0,null,null,58,"div",[["class","card mb-3"]],null,null,null,null,null)),(l()(),n.ub(67,0,null,null,5,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,[" Detailed Report "])),(l()(),n.ub(69,0,null,null,3,"span",[["class","pull-right"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Total: "])),(l()(),n.ub(71,0,null,null,0,"i",[["class","fa fa-rupee"]],null,null,null,null,null)),(l()(),n.Mb(72,null,[" ",""])),(l()(),n.ub(73,0,null,null,51,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),n.ub(74,0,null,null,48,"div",[["class","row"]],null,null,null,null,null)),(l()(),n.ub(75,0,null,null,10,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),n.ub(76,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Category"])),(l()(),n.ub(78,0,null,null,7,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),n.ub(79,0,null,null,6,"ng-multiselect-dropdown",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"]],function(l,e,t){var r=!0,a=l.component;return"blur"===e&&(r=!1!==n.Eb(l,80).onTouched()&&r),"ngModelChange"===e&&(r=!1!==(a.selectedLineCategory=t)&&r),r},u.b,u.a)),n.tb(80,49152,null,0,s.a,[n.h],{placeholder:[0,"placeholder"],settings:[1,"settings"],data:[2,"data"]},null),n.Jb(1024,null,r.n,function(l){return[l]},[s.a]),n.tb(82,671744,null,0,r.s,[[8,null],[8,null],[8,null],[6,r.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),n.Hb(83,{standalone:0}),n.Jb(2048,null,r.o,null,[r.s]),n.tb(85,16384,null,0,r.p,[[4,r.o]],null,null),(l()(),n.ub(86,0,null,null,10,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),n.ub(87,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Name"])),(l()(),n.ub(89,0,null,null,7,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),n.ub(90,0,null,null,6,"ng-multiselect-dropdown",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"]],function(l,e,t){var r=!0,a=l.component;return"blur"===e&&(r=!1!==n.Eb(l,91).onTouched()&&r),"ngModelChange"===e&&(r=!1!==(a.selectedLineItem=t)&&r),r},u.b,u.a)),n.tb(91,49152,null,0,s.a,[n.h],{placeholder:[0,"placeholder"],settings:[1,"settings"],data:[2,"data"]},null),n.Jb(1024,null,r.n,function(l){return[l]},[s.a]),n.tb(93,671744,null,0,r.s,[[8,null],[8,null],[8,null],[6,r.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),n.Hb(94,{standalone:0}),n.Jb(2048,null,r.o,null,[r.s]),n.tb(96,16384,null,0,r.p,[[4,r.o]],null,null),(l()(),n.ub(97,0,null,null,7,"div",[["class","col-xl-6"]],null,null,null,null,null)),(l()(),n.ub(98,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Date"])),(l()(),n.ub(100,0,null,null,4,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),n.ub(101,0,null,null,3,"div",[["class","form-control"],["id","lDate"]],null,null,null,null,null)),(l()(),n.ub(102,0,null,null,0,"span",[["class","fa fa-calendar"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["\xa0\xa0"])),(l()(),n.ub(104,0,null,null,0,"span",[["class","date-val"]],null,null,null,null,null)),(l()(),n.ub(105,0,null,null,17,"div",[["class","col-xl-6 list-bill-search"]],null,null,null,null,null)),(l()(),n.ub(106,0,null,null,1,"label",[["class","control-label col-sm-12"]],null,null,null,null,null)),(l()(),n.Mb(-1,null,["Bill Type"])),(l()(),n.ub(108,0,null,null,14,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),n.ub(109,0,null,null,11,"select",[["class","form-control reports-bill-type"],["name","searchBillType"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(l,e,t){var r=!0,a=l.component;return"change"===e&&(r=!1!==n.Eb(l,110).onChange(t.target.value)&&r),"blur"===e&&(r=!1!==n.Eb(l,110).onTouched()&&r),"ngModelChange"===e&&(r=!1!==(a.searchLineBillType=t)&&r),r},null,null)),n.tb(110,16384,null,0,r.x,[n.H,n.k],null,null),n.Jb(1024,null,r.n,function(l){return[l]},[r.x]),n.tb(112,671744,null,0,r.s,[[8,null],[8,null],[8,null],[6,r.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),n.Jb(2048,null,r.o,null,[r.s]),n.tb(114,16384,null,0,r.p,[[4,r.o]],null,null),(l()(),n.ub(115,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),n.tb(116,147456,null,0,r.t,[n.k,n.H,[2,r.x]],{value:[0,"value"]},null),n.tb(117,147456,null,0,r.E,[n.k,n.H,[8,null]],{value:[0,"value"]},null),(l()(),n.Mb(-1,null,["All"])),(l()(),n.lb(16777216,null,null,1,null,C)),n.tb(120,278528,null,0,c.n,[n.S,n.P,n.t],{ngForOf:[0,"ngForOf"]},null),(l()(),n.ub(121,0,null,null,1,"button",[["class","btn btn-info reports-search-btn"],["type","button"]],null,[[null,"click"]],function(l,e,t){var n=!0;return"click"===e&&(n=!1!==l.component.onLineChartSearch()&&n),n},null,null)),(l()(),n.Mb(-1,null,["Search"])),(l()(),n.lb(16777216,null,null,1,null,m)),n.tb(124,16384,null,0,c.o,[n.S,n.P],{ngIf:[0,"ngIf"]},null)],function(l,e){var t=e.component;l(e,3,0,"Reports","fa-bar-chart-o"),l(e,20,0,"Select Category",t.dropdownSettings,t.categoryList);var n=t.selectedPieCategory,r=l(e,23,0,!0);l(e,22,0,n,r),l(e,31,0,"Select Bill Name",t.dropdownSettings,t.itemList);var a=t.selectedPieItem,o=l(e,34,0,!0);l(e,33,0,a,o),l(e,52,0,"searchBillType",t.searchPieBillType),l(e,56,0,""),l(e,57,0,""),l(e,60,0,t.billTypes),l(e,64,0,t.isPieChartReady),l(e,80,0,"Select Category",t.dropdownSettings,t.categoryList);var i=t.selectedLineCategory,u=l(e,83,0,!0);l(e,82,0,i,u),l(e,91,0,"Select Bill Name",t.dropdownSettings,t.itemList);var s=t.selectedLineItem,c=l(e,94,0,!0);l(e,93,0,s,c),l(e,112,0,"searchBillType",t.searchLineBillType),l(e,116,0,""),l(e,117,0,""),l(e,120,0,t.billTypes),l(e,124,0,t.isLineChartReady)},function(l,e){var t=e.component;l(e,12,0,t.pieChartTotal),l(e,19,0,n.Eb(e,25).ngClassUntouched,n.Eb(e,25).ngClassTouched,n.Eb(e,25).ngClassPristine,n.Eb(e,25).ngClassDirty,n.Eb(e,25).ngClassValid,n.Eb(e,25).ngClassInvalid,n.Eb(e,25).ngClassPending),l(e,30,0,n.Eb(e,36).ngClassUntouched,n.Eb(e,36).ngClassTouched,n.Eb(e,36).ngClassPristine,n.Eb(e,36).ngClassDirty,n.Eb(e,36).ngClassValid,n.Eb(e,36).ngClassInvalid,n.Eb(e,36).ngClassPending),l(e,49,0,n.Eb(e,54).ngClassUntouched,n.Eb(e,54).ngClassTouched,n.Eb(e,54).ngClassPristine,n.Eb(e,54).ngClassDirty,n.Eb(e,54).ngClassValid,n.Eb(e,54).ngClassInvalid,n.Eb(e,54).ngClassPending),l(e,72,0,t.lineChartTotal),l(e,79,0,n.Eb(e,85).ngClassUntouched,n.Eb(e,85).ngClassTouched,n.Eb(e,85).ngClassPristine,n.Eb(e,85).ngClassDirty,n.Eb(e,85).ngClassValid,n.Eb(e,85).ngClassInvalid,n.Eb(e,85).ngClassPending),l(e,90,0,n.Eb(e,96).ngClassUntouched,n.Eb(e,96).ngClassTouched,n.Eb(e,96).ngClassPristine,n.Eb(e,96).ngClassDirty,n.Eb(e,96).ngClassValid,n.Eb(e,96).ngClassInvalid,n.Eb(e,96).ngClassPending),l(e,109,0,n.Eb(e,114).ngClassUntouched,n.Eb(e,114).ngClassTouched,n.Eb(e,114).ngClassPristine,n.Eb(e,114).ngClassDirty,n.Eb(e,114).ngClassValid,n.Eb(e,114).ngClassInvalid,n.Eb(e,114).ngClassPending)})}function _(l){return n.Ob(0,[(l()(),n.ub(0,0,null,null,1,"app-reports",[],null,null,null,x,f)),n.tb(1,4308992,null,0,d.a,[h.a,g.a,b.a,p.a],null,null)],function(l,e){l(e,1,0)},null)}var D=n.qb("app-reports",d.a,_,{},{},[])},cXLJ:function(l,e,t){"use strict";t.d(e,"a",function(){return r}),t.d(e,"b",function(){return n}),t("M0ag"),t("9HtL");var n={pvName:"View Reports"},r=function(){return function(){}}()},qb46:function(l,e,t){l.exports=function(l){"use strict";var e=(l=l&&l.hasOwnProperty("default")?l.default:l).helpers,t=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var l=window.screen;if(l)return(l.deviceXDPI||1)/(l.logicalXDPI||1)}return 1}(),n={toTextLines:function(l){var t,n=[];for(l=[].concat(l);l.length;)"string"==typeof(t=l.pop())?n.unshift.apply(n,t.split("\n")):Array.isArray(t)?l.push.apply(l,t):e.isNullOrUndef(l)||n.unshift(""+t);return n},toFontString:function(l){return!l||e.isNullOrUndef(l.size)||e.isNullOrUndef(l.family)?null:(l.style?l.style+" ":"")+(l.weight?l.weight+" ":"")+l.size+"px "+l.family},textSize:function(l,e,t){var n,r=[].concat(e),a=r.length,o=l.font,i=0;for(l.font=t.string,n=0;n<a;++n)i=Math.max(l.measureText(r[n]).width,i);return l.font=o,{height:a*t.lineHeight,width:i}},parseFont:function(t){var r=l.defaults.global,a=e.valueOrDefault(t.size,r.defaultFontSize),o={family:e.valueOrDefault(t.family,r.defaultFontFamily),lineHeight:e.options.toLineHeight(t.lineHeight,a),size:a,style:e.valueOrDefault(t.style,r.defaultFontStyle),weight:e.valueOrDefault(t.weight,null),string:""};return o.string=n.toFontString(o),o},bound:function(l,e,t){return Math.max(l,Math.min(e,t))},arrayDiff:function(l,e){var t,n,r,a,o=l.slice(),i=[];for(t=0,r=e.length;t<r;++t)-1===(n=o.indexOf(a=e[t]))?i.push([a,1]):o.splice(n,1);for(t=0,r=o.length;t<r;++t)i.push([o[t],-1]);return i},rasterize:function(l){return Math.round(l*t)/t}};function r(l,e){var t=e.x,n=e.y;if(null===t)return{x:0,y:-1};if(null===n)return{x:1,y:0};var r=l.x-t,a=l.y-n,o=Math.sqrt(r*r+a*a);return{x:o?r/o:0,y:o?a/o:-1}}var a=0,o=1,i=2,u=4,s=8;function c(l,e,t){var n=a;return l<t.left?n|=o:l>t.right&&(n|=i),e<t.top?n|=s:e>t.bottom&&(n|=u),n}function d(l,e){var t,n,r=e.anchor,a=l;return e.clamp&&(a=function(l,e){for(var t,n,r,a=l.x0,d=l.y0,h=l.x1,g=l.y1,b=c(a,d,e),p=c(h,g,e);b|p&&!(b&p);)(t=b||p)&s?(n=a+(h-a)*(e.top-d)/(g-d),r=e.top):t&u?(n=a+(h-a)*(e.bottom-d)/(g-d),r=e.bottom):t&i?(r=d+(g-d)*(e.right-a)/(h-a),n=e.right):t&o&&(r=d+(g-d)*(e.left-a)/(h-a),n=e.left),t===b?b=c(a=n,d=r,e):p=c(h=n,g=r,e);return{x0:a,x1:h,y0:d,y1:g}}(a,e.area)),"start"===r?(t=a.x0,n=a.y0):"end"===r?(t=a.x1,n=a.y1):(t=(a.x0+a.x1)/2,n=(a.y0+a.y1)/2),function(l,e,t,n,r){switch(r){case"center":t=n=0;break;case"bottom":t=0,n=1;break;case"right":t=1,n=0;break;case"left":t=-1,n=0;break;case"top":t=0,n=-1;break;case"start":t=-t,n=-n;break;case"end":break;default:r*=Math.PI/180,t=Math.cos(r),n=Math.sin(r)}return{x:l,y:e,vx:t,vy:n}}(t,n,l.vx,l.vy,e.align)}var h={arc:function(l,e){var t=(l.startAngle+l.endAngle)/2,n=Math.cos(t),r=Math.sin(t),a=l.innerRadius,o=l.outerRadius;return d({x0:l.x+n*a,y0:l.y+r*a,x1:l.x+n*o,y1:l.y+r*o,vx:n,vy:r},e)},point:function(l,e){var t=r(l,e.origin),n=t.x*l.radius,a=t.y*l.radius;return d({x0:l.x-n,y0:l.y-a,x1:l.x+n,y1:l.y+a,vx:t.x,vy:t.y},e)},rect:function(l,e){var t=r(l,e.origin),n=l.x,a=l.y,o=0,i=0;return l.horizontal?(n=Math.min(l.x,l.base),o=Math.abs(l.base-l.x)):(a=Math.min(l.y,l.base),i=Math.abs(l.base-l.y)),d({x0:n,y0:a+i,x1:n+o,y1:a,vx:t.x,vy:t.y},e)},fallback:function(l,e){var t=r(l,e.origin);return d({x0:l.x,y0:l.y,x1:l.x,y1:l.y,vx:t.x,vy:t.y},e)}},g=l.helpers,b=n.rasterize;function p(l){var e=l._model.horizontal,t=l._scale||e&&l._xScale||l._yScale;if(!t)return null;if(void 0!==t.xCenter&&void 0!==t.yCenter)return{x:t.xCenter,y:t.yCenter};var n=t.getBasePixel();return e?{x:n,y:null}:{x:null,y:n}}function f(l,e,t){var n=l.shadowBlur,r=t.stroked,a=b(t.x),o=b(t.y),i=b(t.w);r&&l.strokeText(e,a,o,i),t.filled&&(n&&r&&(l.shadowBlur=0),l.fillText(e,a,o,i),n&&r&&(l.shadowBlur=n))}var v=function(l,e,t,n){var r=this;r._config=l,r._index=n,r._model=null,r._rects=null,r._ctx=e,r._el=t};g.extend(v.prototype,{_modelize:function(e,t,r,a){var o,i=this._index,u=g.options.resolve,s=n.parseFont(u([r.font,{}],a,i)),c=u([r.color,l.defaults.global.defaultFontColor],a,i);return{align:u([r.align,"center"],a,i),anchor:u([r.anchor,"center"],a,i),area:a.chart.chartArea,backgroundColor:u([r.backgroundColor,null],a,i),borderColor:u([r.borderColor,null],a,i),borderRadius:u([r.borderRadius,0],a,i),borderWidth:u([r.borderWidth,0],a,i),clamp:u([r.clamp,!1],a,i),clip:u([r.clip,!1],a,i),color:c,display:e,font:s,lines:t,offset:u([r.offset,0],a,i),opacity:u([r.opacity,1],a,i),origin:p(this._el),padding:g.options.toPadding(u([r.padding,0],a,i)),positioner:(o=this._el,o instanceof l.elements.Arc?h.arc:o instanceof l.elements.Point?h.point:o instanceof l.elements.Rectangle?h.rect:h.fallback),rotation:u([r.rotation,0],a,i)*(Math.PI/180),size:n.textSize(this._ctx,t,s),textAlign:u([r.textAlign,"start"],a,i),textShadowBlur:u([r.textShadowBlur,0],a,i),textShadowColor:u([r.textShadowColor,c],a,i),textStrokeColor:u([r.textStrokeColor,c],a,i),textStrokeWidth:u([r.textStrokeWidth,0],a,i)}},update:function(l){var e,t,r,a=this,o=null,i=null,u=a._index,s=a._config,c=g.options.resolve([s.display,!0],l,u);c&&(t=g.valueOrDefault(g.callback(s.formatter,[e=l.dataset.data[u],l]),e),(r=g.isNullOrUndef(t)?[]:n.toTextLines(t)).length&&(i=function(l){var e=l.borderWidth||0,t=l.padding,n=l.size.height,r=l.size.width,a=-r/2,o=-n/2;return{frame:{x:a-t.left-e,y:o-t.top-e,w:r+t.width+2*e,h:n+t.height+2*e},text:{x:a,y:o,w:r,h:n}}}(o=a._modelize(c,r,s,l)))),a._model=o,a._rects=i},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(l,e){var t,r=l.ctx,a=this._model,o=this._rects;this.visible()&&(r.save(),a.clip&&(t=a.area,r.beginPath(),r.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),r.clip()),r.globalAlpha=n.bound(0,a.opacity,1),r.translate(b(e.x),b(e.y)),r.rotate(a.rotation),function(l,e,t){var n=t.backgroundColor,r=t.borderColor,a=t.borderWidth;(n||r&&a)&&(l.beginPath(),g.canvas.roundedRect(l,b(e.x)+a/2,b(e.y)+a/2,b(e.w)-a,b(e.h)-a,t.borderRadius),l.closePath(),n&&(l.fillStyle=n,l.fill()),r&&a&&(l.strokeStyle=r,l.lineWidth=a,l.lineJoin="miter",l.stroke()))}(r,o.frame,a),function(l,e,t,n){var r,a=n.textAlign,o=n.color,i=!!o,u=n.font,s=e.length,c=n.textStrokeColor,d=n.textStrokeWidth,h=c&&d;if(s&&(i||h))for(t=function(l,e,t){var n=t.lineHeight,r=l.w,a=l.x;return"center"===e?a+=r/2:"end"!==e&&"right"!==e||(a+=r),{h:n,w:r,x:a,y:l.y+n/2}}(t,a,u),l.font=u.string,l.textAlign=a,l.textBaseline="middle",l.shadowBlur=n.textShadowBlur,l.shadowColor=n.textShadowColor,i&&(l.fillStyle=o),h&&(l.lineJoin="round",l.lineWidth=d,l.strokeStyle=c),r=0,s=e.length;r<s;++r)f(l,e[r],{stroked:h,filled:i,w:t.w,x:t.x,y:t.y+t.h*r})}(r,a.lines,o.text,a),r.restore())}});var y=Number.MIN_SAFE_INTEGER||-9007199254740991,C=Number.MAX_SAFE_INTEGER||9007199254740991;function m(l,e,t){var n=Math.cos(t),r=Math.sin(t),a=e.x,o=e.y;return{x:a+n*(l.x-a)-r*(l.y-o),y:o+r*(l.x-a)+n*(l.y-o)}}function x(l,e){var t,n,r,a=C,o=y,i=e.origin;for(t=0;t<l.length;++t)r=e.vx*((n=l[t]).x-i.x)+e.vy*(n.y-i.y),a=Math.min(a,r),o=Math.max(o,r);return{min:a,max:o}}function _(l,e){var t=e.x-l.x,n=e.y-l.y,r=Math.sqrt(t*t+n*n);return{vx:(e.x-l.x)/r,vy:(e.y-l.y)/r,origin:l,ln:r}}var D=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function S(l,e,t){var n=e.positioner(l,e),r=n.vx,a=n.vy;if(!r&&!a)return{x:n.x,y:n.y};var o=t.w,i=t.h,u=e.rotation,s=Math.abs(o/2*Math.cos(u))+Math.abs(i/2*Math.sin(u)),c=Math.abs(o/2*Math.sin(u))+Math.abs(i/2*Math.cos(u)),d=1/Math.max(Math.abs(r),Math.abs(a));return s*=r*d,c*=a*d,{x:n.x+(s+=e.offset*r),y:n.y+(c+=e.offset*a)}}l.helpers.extend(D.prototype,{center:function(){var l=this._rect;return{x:l.x+l.w/2,y:l.y+l.h/2}},update:function(l,e,t){this._rotation=t,this._rect={x:e.x+l.x,y:e.y+l.y,w:e.w,h:e.h}},contains:function(l){var e=this._rect;return!((l=m(l,this.center(),-this._rotation)).x<e.x-1||l.y<e.y-1||l.x>e.x+e.w+2||l.y>e.y+e.h+2)},intersects:function(l){var e,t,n,r=this._points(),a=l._points(),o=[_(r[0],r[1]),_(r[0],r[3])];for(this._rotation!==l._rotation&&o.push(_(a[0],a[1]),_(a[0],a[3])),e=0;e<o.length;++e)if(t=x(r,o[e]),n=x(a,o[e]),t.max<n.min||n.max<t.min)return!1;return!0},_points:function(){var l=this._rect,e=this._rotation,t=this.center();return[m({x:l.x,y:l.y},t,e),m({x:l.x+l.w,y:l.y},t,e),m({x:l.x+l.w,y:l.y+l.h},t,e),m({x:l.x,y:l.y+l.h},t,e)]}});var k={prepare:function(l){var e,t,n,r,a,o=[];for(e=0,n=l.length;e<n;++e)for(t=0,r=l[e].length;t<r;++t)o.push(a=l[e][t]),a.$layout={_box:new D,_hidable:!1,_visible:!0,_set:e,_idx:t};return o.sort(function(l,e){var t=l.$layout,n=e.$layout;return t._idx===n._idx?t._set-n._set:n._idx-t._idx}),this.update(o),o},update:function(l){var e,t,n,r,a,o=!1;for(e=0,t=l.length;e<t;++e)r=(n=l[e]).model(),(a=n.$layout)._hidable=r&&"auto"===r.display,a._visible=n.visible(),o|=a._hidable;o&&function(l){var e,t,n,r,a,o;for(e=0,t=l.length;e<t;++e)(r=(n=l[e]).$layout)._visible&&(a=n.geometry(),o=S(n._el._model,n.model(),a),r._box.update(o,a,n.rotation()));!function(l,e){var t,n,r,a;for(t=l.length-1;t>=0;--t)for(r=l[t].$layout,n=t-1;n>=0&&r._visible;--n)(a=l[n].$layout)._visible&&r._box.intersects(a._box)&&e(r,a)}(l,function(l,e){var t=l._hidable,n=e._hidable;t&&n||n?e._visible=!1:t&&(l._visible=!1)})}(l)},lookup:function(l,e){var t,n;for(t=l.length-1;t>=0;--t)if((n=l[t].$layout)&&n._visible&&n._box.contains(e))return{dataset:n._set,label:l[t]};return null},draw:function(l,e){var t,n,r,a,o,i;for(t=0,n=e.length;t<n;++t)(a=(r=e[t]).$layout)._visible&&(o=r.geometry(),i=S(r._el._view,r.model(),o),a._box.update(i,o,r.rotation()),r.draw(l,i))}},w=l.helpers,B=l.helpers,M="$datalabels";function L(l,e,t){var n=e&&e[t.dataset];if(n){var r=t.label,a=r.$context;!0===B.callback(n,[a])&&(l[M]._dirty=!0,r.update(a))}}l.defaults.global.plugins.datalabels={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(l){if(w.isNullOrUndef(l))return null;var e,t,n,r=l;if(w.isObject(l))if(w.isNullOrUndef(l.label))if(w.isNullOrUndef(l.r))for(r="",n=0,t=(e=Object.keys(l)).length;n<t;++n)r+=(0!==n?", ":"")+e[n]+": "+l[e[n]];else r=l.r;else r=l.label;return""+r},listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0};var T={id:"datalabels",beforeInit:function(l){l[M]={_actives:[]}},beforeUpdate:function(l){var e=l[M];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(l,e,t){var n,r,a,o=e.index,i=l[M],u=i._datasets[o]=[],s=l.isDatasetVisible(o),c=l.data.datasets[o],d=function(l,e){var t=l.datalabels;return!1===t?null:(!0===t&&(t={}),B.merge({},[e,t]))}(c,t),h=e.meta.data||[],g=h.length,b=l.ctx;for(b.save(),n=0;n<g;++n)r=h[n],s&&r&&!r.hidden&&!r._model.skip?(u.push(a=new v(d,b,r,n)),a.update(a.$context={active:!1,chart:l,dataIndex:n,dataset:c,datasetIndex:o})):a=null,r[M]=a;b.restore(),B.merge(i._listeners,d.listeners||{},{merger:function(l,t,n){t[l]=t[l]||{},t[l][e.index]=n[l],i._listened=!0}})},afterUpdate:function(l,e){l[M]._labels=k.prepare(l[M]._datasets,e)},afterDatasetsDraw:function(l){k.draw(l,l[M]._labels)},beforeEvent:function(l,e){if(l[M]._listened)switch(e.type){case"mousemove":case"mouseout":!function(l,e){var t,n,r=l[M],a=r._listeners;if(a.enter||a.leave){if("mousemove"===e.type)n=k.lookup(r._labels,e);else if("mouseout"!==e.type)return;t=r._hovered,r._hovered=n,function(l,e,t,n){var r,a;(t||n)&&(t?n?t.label!==n.label&&(a=r=!0):a=!0:r=!0,a&&L(l,e.leave,t),r&&L(l,e.enter,n))}(l,a,t,n)}}(l,e);break;case"click":!function(l,e){var t=l[M],n=t._listeners.click,r=n&&k.lookup(t._labels,e);r&&L(l,n,r)}(l,e)}},afterEvent:function(e){var t,r,a,o,i=e[M],u=i._actives,s=i._actives=e.lastActive||[],c=n.arrayDiff(u,s);for(t=0,r=c.length;t<r;++t)(a=c[t])[1]&&(o=a[0][M])&&(o.$context.active=1===a[1],o.update(o.$context));(i._dirty||c.length)&&(k.update(i._labels),function(e){if(!e.animating){for(var t=l.animationService.animations,n=0,r=t.length;n<r;++n)if(t[n].chart===e)return;e.render({duration:1,lazy:!0})}}(e)),delete i._dirty}};return l.plugins.register(T),T}(t("MO+k"))}}]);